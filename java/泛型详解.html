<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java æ³›å‹è¯¦è§£ | wums</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="wums note">
    <link rel="preload" href="/source-files/assets/css/0.styles.6eaab90e.css" as="style"><link rel="preload" href="/source-files/assets/js/app.10d876f2.js" as="script"><link rel="preload" href="/source-files/assets/js/2.98231419.js" as="script"><link rel="preload" href="/source-files/assets/js/34.f1e2df77.js" as="script"><link rel="prefetch" href="/source-files/assets/js/10.a9e7c10e.js"><link rel="prefetch" href="/source-files/assets/js/11.d1383481.js"><link rel="prefetch" href="/source-files/assets/js/12.88a800cc.js"><link rel="prefetch" href="/source-files/assets/js/13.d2277c3f.js"><link rel="prefetch" href="/source-files/assets/js/14.9bd4931d.js"><link rel="prefetch" href="/source-files/assets/js/15.9c6fd0cd.js"><link rel="prefetch" href="/source-files/assets/js/16.082c926d.js"><link rel="prefetch" href="/source-files/assets/js/17.3219be0c.js"><link rel="prefetch" href="/source-files/assets/js/18.b33c8793.js"><link rel="prefetch" href="/source-files/assets/js/19.c232bc2a.js"><link rel="prefetch" href="/source-files/assets/js/20.afe82b7b.js"><link rel="prefetch" href="/source-files/assets/js/21.43ecc853.js"><link rel="prefetch" href="/source-files/assets/js/22.d8195a62.js"><link rel="prefetch" href="/source-files/assets/js/23.f0d571bf.js"><link rel="prefetch" href="/source-files/assets/js/24.cd3533db.js"><link rel="prefetch" href="/source-files/assets/js/25.2c0c6e9d.js"><link rel="prefetch" href="/source-files/assets/js/26.56f43f39.js"><link rel="prefetch" href="/source-files/assets/js/27.368913d4.js"><link rel="prefetch" href="/source-files/assets/js/28.2a31ffca.js"><link rel="prefetch" href="/source-files/assets/js/29.96527dd1.js"><link rel="prefetch" href="/source-files/assets/js/3.39824a4a.js"><link rel="prefetch" href="/source-files/assets/js/30.53e34301.js"><link rel="prefetch" href="/source-files/assets/js/31.51f39588.js"><link rel="prefetch" href="/source-files/assets/js/32.b65f7e2c.js"><link rel="prefetch" href="/source-files/assets/js/33.9e0bec38.js"><link rel="prefetch" href="/source-files/assets/js/35.3cd08acc.js"><link rel="prefetch" href="/source-files/assets/js/36.7d96950e.js"><link rel="prefetch" href="/source-files/assets/js/37.b66e50c2.js"><link rel="prefetch" href="/source-files/assets/js/38.398f5ba1.js"><link rel="prefetch" href="/source-files/assets/js/39.4f29a3f0.js"><link rel="prefetch" href="/source-files/assets/js/4.2a0bc255.js"><link rel="prefetch" href="/source-files/assets/js/40.4e667bdb.js"><link rel="prefetch" href="/source-files/assets/js/41.147ece2a.js"><link rel="prefetch" href="/source-files/assets/js/42.d5fa019e.js"><link rel="prefetch" href="/source-files/assets/js/43.570c1431.js"><link rel="prefetch" href="/source-files/assets/js/44.acc1fefb.js"><link rel="prefetch" href="/source-files/assets/js/45.74b5d734.js"><link rel="prefetch" href="/source-files/assets/js/46.97beead4.js"><link rel="prefetch" href="/source-files/assets/js/47.eebe1760.js"><link rel="prefetch" href="/source-files/assets/js/48.f1ac01aa.js"><link rel="prefetch" href="/source-files/assets/js/49.abda4459.js"><link rel="prefetch" href="/source-files/assets/js/5.8650ae61.js"><link rel="prefetch" href="/source-files/assets/js/50.5c22cabe.js"><link rel="prefetch" href="/source-files/assets/js/51.89f721e7.js"><link rel="prefetch" href="/source-files/assets/js/52.7fb7e99f.js"><link rel="prefetch" href="/source-files/assets/js/53.66623add.js"><link rel="prefetch" href="/source-files/assets/js/54.bc621265.js"><link rel="prefetch" href="/source-files/assets/js/55.8d7a8d20.js"><link rel="prefetch" href="/source-files/assets/js/56.eab92340.js"><link rel="prefetch" href="/source-files/assets/js/57.f9a9ab9a.js"><link rel="prefetch" href="/source-files/assets/js/58.e149e898.js"><link rel="prefetch" href="/source-files/assets/js/59.a4c2deff.js"><link rel="prefetch" href="/source-files/assets/js/6.10edd4c9.js"><link rel="prefetch" href="/source-files/assets/js/60.67d6c614.js"><link rel="prefetch" href="/source-files/assets/js/61.14051c5f.js"><link rel="prefetch" href="/source-files/assets/js/62.f0ba2bce.js"><link rel="prefetch" href="/source-files/assets/js/63.b2db8439.js"><link rel="prefetch" href="/source-files/assets/js/64.247d9674.js"><link rel="prefetch" href="/source-files/assets/js/65.9c95d761.js"><link rel="prefetch" href="/source-files/assets/js/66.60214349.js"><link rel="prefetch" href="/source-files/assets/js/67.dbb02d7b.js"><link rel="prefetch" href="/source-files/assets/js/68.dd98851d.js"><link rel="prefetch" href="/source-files/assets/js/69.7ba7cd40.js"><link rel="prefetch" href="/source-files/assets/js/7.5c3c9df0.js"><link rel="prefetch" href="/source-files/assets/js/70.60919f93.js"><link rel="prefetch" href="/source-files/assets/js/71.8c3ac930.js"><link rel="prefetch" href="/source-files/assets/js/72.9e48b504.js"><link rel="prefetch" href="/source-files/assets/js/73.6294cc42.js"><link rel="prefetch" href="/source-files/assets/js/74.57c9a936.js"><link rel="prefetch" href="/source-files/assets/js/75.4d66d66b.js"><link rel="prefetch" href="/source-files/assets/js/76.a4b7db7e.js"><link rel="prefetch" href="/source-files/assets/js/77.92963b18.js"><link rel="prefetch" href="/source-files/assets/js/78.f6edc2e1.js"><link rel="prefetch" href="/source-files/assets/js/79.f0235d3a.js"><link rel="prefetch" href="/source-files/assets/js/8.37d0a076.js"><link rel="prefetch" href="/source-files/assets/js/80.0b527af6.js"><link rel="prefetch" href="/source-files/assets/js/81.e4062f4d.js"><link rel="prefetch" href="/source-files/assets/js/82.c5a6ac8c.js"><link rel="prefetch" href="/source-files/assets/js/83.b13d4e3b.js"><link rel="prefetch" href="/source-files/assets/js/84.15f3291c.js"><link rel="prefetch" href="/source-files/assets/js/85.55633a14.js"><link rel="prefetch" href="/source-files/assets/js/86.b7373dc8.js"><link rel="prefetch" href="/source-files/assets/js/9.6db4de5e.js">
    <link rel="stylesheet" href="/source-files/assets/css/0.styles.6eaab90e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/source-files/" class="home-link router-link-active"><!----> <span class="site-name">wums</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/source-files/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://gitee.com/wmsnote/dashboard/wikis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WiKi
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://gitee.com/wmsnote/source-files" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitEE
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/source-files/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://gitee.com/wmsnote/dashboard/wikis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WiKi
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://gitee.com/wmsnote/source-files" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitEE
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/shell/" class="sidebar-heading clickable"><span>shell</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/è®¾è®¡æ¨¡å¼/" class="sidebar-heading clickable"><span>è®¾è®¡æ¨¡å¼</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/prometheus/" class="sidebar-heading clickable"><span>prometheus</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/travis-ci/" class="sidebar-heading clickable"><span>travis-ciæ•™ç¨‹</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/Dockerfile/" class="sidebar-heading clickable"><span>Dockerfile</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/java/" class="sidebar-heading clickable router-link-active open"><span>Javaæ•™ç¨‹</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/source-files/java/jdbc.html" class="sidebar-link">jdbc</a></li><li><a href="/source-files/java/apacheCommons.html" class="sidebar-link">apache-commons</a></li><li><a href="/source-files/java/optional.html" class="sidebar-link">java-8-Optional</a></li><li><a href="/source-files/java/æ³›å‹è¯¦è§£.html" class="active sidebar-link">Javaæ³›å‹è¯¦è§£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/source-files/java/æ³›å‹è¯¦è§£.html#_1-å¼•è¨€" class="sidebar-link">1. å¼•è¨€</a></li><li class="sidebar-sub-header"><a href="/source-files/java/æ³›å‹è¯¦è§£.html#_2-æ³›å‹åŸºç¡€" class="sidebar-link">2. æ³›å‹åŸºç¡€â™¥ï¸â™¥ï¸â™¥ï¸</a></li><li class="sidebar-sub-header"><a href="/source-files/java/æ³›å‹è¯¦è§£.html#_3-è¾¹ç•Œç¬¦" class="sidebar-link">3. è¾¹ç•Œç¬¦â™¦ï¸â™¦ï¸â™¦ï¸</a></li><li class="sidebar-sub-header"><a href="/source-files/java/æ³›å‹è¯¦è§£.html#_4-é€šé…ç¬¦" class="sidebar-link">4. é€šé…ç¬¦</a></li><li class="sidebar-sub-header"><a href="/source-files/java/æ³›å‹è¯¦è§£.html#_5-pecsåŸåˆ™" class="sidebar-link">5. PECSåŸåˆ™</a></li><li class="sidebar-sub-header"><a href="/source-files/java/æ³›å‹è¯¦è§£.html#_6-ç±»å‹æ“¦é™¤" class="sidebar-link">6. ç±»å‹æ“¦é™¤</a></li><li class="sidebar-sub-header"><a href="/source-files/java/æ³›å‹è¯¦è§£.html#_7-å·¥å‚æ¨¡å¼" class="sidebar-link">7. å·¥å‚æ¨¡å¼</a></li></ul></li><li><a href="/source-files/java/stream.html" class="sidebar-link">JavaStreamAPI</a></li><li><a href="/source-files/java/8æ–°ç‰¹æ€§åˆ†æ.html" class="sidebar-link">JAVA8æ–°ç‰¹æ€§åˆ†æ</a></li><li><a href="/source-files/java/å¤šçº¿ç¨‹å®ç°çš„ä¸‰ç§æ–¹å¼.html" class="sidebar-link">Javaå¤šçº¿ç¨‹å®ç°çš„ä¸‰ç§æ–¹å¼</a></li><li><a href="/source-files/java/mapéå†.html" class="sidebar-link">mapéå†</a></li><li><a href="/source-files/java/springæ‰«æè‡ªå®šä¹‰æ³¨è§£å¹¶è¿›è¡Œæ“ä½œ.html" class="sidebar-link">springæ‰«æè‡ªå®šä¹‰æ³¨è§£å¹¶è¿›è¡Œæ“ä½œ</a></li><li><a href="/source-files/java/åå°„æé«˜æ‰©å±•æ€§.html" class="sidebar-link">åå°„-æé«˜æ‰©å±•æ€§</a></li><li><a href="/source-files/java/æ³¨è§£çš„å®šä¹‰å’Œåå°„.html" class="sidebar-link">æ³¨è§£çš„å®šä¹‰å’Œåå°„</a></li><li><a href="/source-files/java/è·å–æŒ‡å®šåŒ…ä¸‹æ‰€æœ‰è‡ªå®šä¹‰æ³¨è§£å¹¶æå–æ³¨è§£ä¿¡æ¯.html" class="sidebar-link">è·å–æŒ‡å®šåŒ…ä¸‹æ‰€æœ‰è‡ªå®šä¹‰æ³¨è§£å¹¶æå–æ³¨è§£ä¿¡æ¯</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/springboot2/" class="sidebar-heading clickable"><span>SpringBoot2.x</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/nginx/" class="sidebar-heading clickable"><span>nginx</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java-æ³›å‹è¯¦è§£"><a href="#java-æ³›å‹è¯¦è§£" class="header-anchor">#</a> Java æ³›å‹è¯¦è§£</h1> <p>ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹</p> <h2 id="_1-å¼•è¨€"><a href="#_1-å¼•è¨€" class="header-anchor">#</a> 1. å¼•è¨€</h2> <p>æ³›å‹æ˜¯Javaä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œåœ¨Javaé›†åˆç±»æ¡†æ¶ä¸­æ³›å‹è¢«å¹¿æ³›åº”ç”¨ã€‚
æœ¬æ–‡æˆ‘ä»¬å°†ä»é›¶å¼€å§‹æ¥çœ‹ä¸€ä¸‹Javaæ³›å‹çš„è®¾è®¡ï¼Œå°†ä¼šæ¶‰åŠåˆ°é€šé…ç¬¦å¤„ç†ï¼Œä»¥åŠè®©äººè‹¦æ¼çš„ç±»å‹æ“¦é™¤ã€‚</p> <h2 id="_2-æ³›å‹åŸºç¡€"><a href="#_2-æ³›å‹åŸºç¡€" class="header-anchor">#</a> 2. æ³›å‹åŸºç¡€â™¥ï¸â™¥ï¸â™¥ï¸</h2> <h3 id="_2-1-æ³›å‹ç±»"><a href="#_2-1-æ³›å‹ç±»" class="header-anchor">#</a> 2-1. æ³›å‹ç±»ğŸ’ŠğŸ’ŠğŸ’Š</h3> <p>æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸€ä¸ªç®€å•çš„Boxç±»ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> object<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>object <span class="token operator">=</span> object<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> object<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è¿™æ˜¯æœ€å¸¸è§çš„åšæ³•ï¼Œè¿™æ ·åšçš„ä¸€ä¸ªåå¤„æ˜¯Boxé‡Œé¢ç°åœ¨åªèƒ½è£…å…¥Stringç±»å‹çš„å…ƒç´ ï¼Œä»Šåå¦‚æœæˆ‘ä»¬éœ€è¦è£…å…¥Integerç­‰å…¶ä»–ç±»å‹çš„å…ƒç´ ï¼Œè¿˜å¿…é¡»è¦å¦å¤–é‡å†™ä¸€ä¸ªBoxï¼ŒğŸ˜­
ä»£ç å¾—ä¸åˆ°å¤ç”¨ï¼Œä½¿ç”¨æ³›å‹å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ğŸ˜„</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// T stands for &quot;Type&quot;</span>
    <span class="token keyword">private</span> <span class="token class-name">T</span> t<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>t <span class="token operator">=</span> t<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> t<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è¿™æ ·æˆ‘ä»¬çš„Boxç±»ä¾¿å¯ä»¥å¾—åˆ°å¤ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†Tæ›¿æ¢æˆä»»ä½•æˆ‘ä»¬æƒ³è¦çš„ç±»å‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> doubleBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stringBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-2-æ³›å‹æ–¹æ³•"><a href="#_2-2-æ³›å‹æ–¹æ³•" class="header-anchor">#</a> 2-2. æ³›å‹æ–¹æ³•ğŸ“¡ğŸ“¡ğŸ“¡</h3> <p>çœ‹å®Œäº†æ³›å‹ç±»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹æ³›å‹æ–¹æ³•ã€‚ğŸ’°ğŸ’°ğŸ’°
å£°æ˜ä¸€ä¸ªæ³›å‹æ–¹æ³•å¾ˆç®€å•ï¼Œåªè¦åœ¨<strong>è¿”å›ç±»å‹å‰é¢</strong>åŠ ä¸Šä¸€ä¸ªç±»ä¼¼<code>&lt;K, V&gt;</code>çš„å½¢å¼å°±è¡Œäº†ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Util</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">boolean</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p1<span class="token punctuation">,</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> p1<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
               p1<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">K</span> key<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">V</span> value<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Pair</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setKey</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">K</span> <span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span> <span class="token keyword">return</span> key<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·å»è°ƒç”¨æ³›å‹æ–¹æ³•ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;apple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;pear&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> same <span class="token operator">=</span> <span class="token class-name">Util</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token function">compare</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æˆ–è€…åœ¨Java1.7/1.8åˆ©ç”¨type inferenceï¼Œè®©Javaè‡ªåŠ¨æ¨å¯¼å‡ºç›¸åº”çš„ç±»å‹å‚æ•°ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;apple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;pear&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> same <span class="token operator">=</span> <span class="token class-name">Util</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹</p> <h2 id="_3-è¾¹ç•Œç¬¦"><a href="#_3-è¾¹ç•Œç¬¦" class="header-anchor">#</a> 3. è¾¹ç•Œç¬¦â™¦ï¸â™¦ï¸â™¦ï¸</h2> <p>ç°åœ¨æˆ‘ä»¬è¦å®ç°è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªæ³›å‹æ•°ç»„ä¸­å¤§äºæŸä¸ªç‰¹å®šå…ƒç´ çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®ç°ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">int</span> <span class="token function">countGreaterThan</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> anArray<span class="token punctuation">,</span> <span class="token class-name">T</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> e <span class="token operator">:</span> anArray<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&gt;</span> elem<span class="token punctuation">)</span>  <span class="token comment">// compiler error</span>
            <span class="token operator">++</span>count<span class="token punctuation">;</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä½†æ˜¯è¿™æ ·å¾ˆæ˜æ˜¾æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºé™¤äº†short, int, double, long, float, byte, charç­‰åŸå§‹ç±»å‹ï¼Œå…¶ä»–çš„ç±»å¹¶ä¸ä¸€å®šèƒ½ä½¿ç”¨æ“ä½œç¬¦&gt;ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨æŠ¥é”™ï¼Œé‚£æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨è¾¹ç•Œç¬¦ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">T</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>åšä¸€ä¸ªç±»ä¼¼äºä¸‹é¢è¿™æ ·çš„å£°æ˜ï¼Œè¿™æ ·å°±ç­‰äºå‘Šè¯‰ç¼–è¯‘å™¨ç±»å‹å‚æ•°Tä»£è¡¨çš„éƒ½æ˜¯å®ç°äº†<code>Comparable</code>æ¥å£çš„ç±»ï¼Œè¿™æ ·ç­‰äºå‘Šè¯‰ç¼–è¯‘å™¨å®ƒä»¬éƒ½è‡³å°‘å®ç°äº†<code>compareTo</code>æ–¹æ³•ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">int</span> <span class="token function">countGreaterThan</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> anArray<span class="token punctuation">,</span> <span class="token class-name">T</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> e <span class="token operator">:</span> anArray<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token operator">++</span>count<span class="token punctuation">;</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹</p> <h2 id="_4-é€šé…ç¬¦"><a href="#_4-é€šé…ç¬¦" class="header-anchor">#</a> 4. é€šé…ç¬¦</h2> <p>åœ¨äº†è§£é€šé…ç¬¦ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»è¦æ¾„æ¸…ä¸€ä¸ªæ¦‚å¿µï¼Œè¿˜æ˜¯å€Ÿç”¨æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„Boxç±»ï¼Œå‡è®¾æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">boxTest</span><span class="token punctuation">(</span><span class="token class-name">Box</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span>  n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>é‚£ä¹ˆç°åœ¨<code>Box&lt;Number&gt; n</code>å…è®¸æ¥å—ä»€ä¹ˆç±»å‹çš„å‚æ•°ï¼Ÿæˆ‘ä»¬æ˜¯å¦èƒ½å¤Ÿä¼ å…¥<code>Box&lt;Integer&gt;</code>æˆ–è€…<code>Box&lt;Double&gt;</code>å‘¢ï¼Ÿ
ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼ŒğŸ˜¢
è™½ç„¶Integerå’ŒDoubleæ˜¯Numberçš„å­ç±»ï¼Œä½†æ˜¯åœ¨æ³›å‹ä¸­<code>Box&lt;Integer&gt;</code>æˆ–è€…<code>Box&lt;Double&gt;</code>ä¸<code>Box&lt;Number&gt;</code>ä¹‹é—´å¹¶æ²¡æœ‰ä»»ä½•çš„å…³ç³»ã€‚â‰ï¸</p> <p>è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­æ¥åŠ æ·±ä¸€ä¸‹ç†è§£ã€‚</p> <p>é¦–å…ˆæˆ‘ä»¬å…ˆå®šä¹‰å‡ ä¸ªç®€å•çš„ç±»ï¼Œä¸‹é¢æˆ‘ä»¬å°†ç”¨åˆ°å®ƒï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Fruit</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Apple</span> <span class="token keyword">extends</span> <span class="token class-name">Fruit</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Orange</span> <span class="token keyword">extends</span> <span class="token class-name">Fruit</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ³›å‹ç±»Readerï¼Œç„¶ååœ¨f1()ä¸­å½“æˆ‘ä»¬å°è¯•<code>Fruit f = fruitReader.readExact(apples);</code>ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>List&lt;Fruit&gt;</code>ä¸<code>List&lt;Apple&gt;</code>ä¹‹é—´å¹¶æ²¡æœ‰ä»»ä½•çš„å…³ç³»ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericReading</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span> apples <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span> fruit <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Fruit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Reader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token class-name">T</span> <span class="token function">readExact</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Reader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span> fruitReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Reader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Errors: List&lt;Fruit&gt; cannot be applied to List&lt;Apple&gt;.</span>
        <span class="token comment">// Fruit f = fruitReader.readExact(apples);</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ä½†æ˜¯æŒ‰ç…§æˆ‘ä»¬é€šå¸¸çš„æ€ç»´ä¹ æƒ¯ï¼ŒAppleå’ŒFruitä¹‹é—´è‚¯å®šæ˜¯å­˜åœ¨è”ç³»ï¼Œç„¶è€Œç¼–è¯‘å™¨å´æ— æ³•è¯†åˆ«ï¼Œé‚£æ€ä¹ˆåœ¨æ³›å‹ä»£ç ä¸­è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨é€šé…ç¬¦æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">CovariantReader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">T</span> <span class="token function">readCovariant</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CovariantReader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span> fruitReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CovariantReader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Fruit</span> f <span class="token operator">=</span> fruitReader<span class="token punctuation">.</span><span class="token function">readCovariant</span><span class="token punctuation">(</span>fruit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Fruit</span> a <span class="token operator">=</span> fruitReader<span class="token punctuation">.</span><span class="token function">readCovariant</span><span class="token punctuation">(</span>apples<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>è¿™æ ·å°±ç›¸å½“ä¸å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œ fruitReaderçš„readCovariantæ–¹æ³•æ¥å—çš„å‚æ•°åªè¦æ˜¯æ»¡è¶³Fruitçš„å­ç±»å°±è¡Œ(åŒ…æ‹¬Fruitè‡ªèº«)ï¼Œè¿™æ ·å­ç±»å’Œçˆ¶ç±»ä¹‹é—´çš„å…³ç³»ä¹Ÿå°±å…³è”ä¸Šäº†ã€‚</p> <p>ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹</p> <h2 id="_5-pecsåŸåˆ™"><a href="#_5-pecsåŸåˆ™" class="header-anchor">#</a> 5. PECSåŸåˆ™</h2> <p>ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°äº†ç±»ä¼¼&lt;? extends T&gt;çš„ç”¨æ³•ï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥ä»listé‡Œé¢getå…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥å¾€listé‡Œé¢addå…ƒç´ å‘¢ï¼Ÿæˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericsAndCovariance</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Wildcards allow covariance:</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Compile Error: can't add any type of object:</span>
        <span class="token comment">// flist.add(new Apple())</span>
        <span class="token comment">// flist.add(new Orange())</span>
        <span class="token comment">// flist.add(new Fruit())</span>
        <span class="token comment">// flist.add(new Object())</span>
        flist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Legal but uninteresting</span>
        <span class="token comment">// We Know that it returns at least Fruit:</span>
        <span class="token class-name">Fruit</span> f <span class="token operator">=</span> flist<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ç­”æ¡ˆæ˜¯å¦å®šğŸ˜¢
Javaç¼–è¯‘å™¨ä¸å…è®¸æˆ‘ä»¬è¿™æ ·åšï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿâ“
å¯¹äºè¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¸å¦¨ä»ç¼–è¯‘å™¨çš„è§’åº¦å»è€ƒè™‘ã€‚å› ä¸º<code>List&lt;? extends Fruit&gt; flist</code>å®ƒè‡ªèº«å¯ä»¥æœ‰å¤šç§å«ä¹‰ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span> flist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Orange</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å½“æˆ‘ä»¬å°è¯•addä¸€ä¸ªAppleçš„æ—¶å€™ï¼Œflistå¯èƒ½æŒ‡å‘<code>new ArrayList&lt;Orange&gt;();</code></p> <p>å½“æˆ‘ä»¬å°è¯•addä¸€ä¸ªOrangeçš„æ—¶å€™ï¼Œflistå¯èƒ½æŒ‡å‘<code>new ArrayList&lt;Apple&gt;();</code></p> <p>å½“æˆ‘ä»¬å°è¯•addä¸€ä¸ªFruitçš„æ—¶å€™ï¼Œè¿™ä¸ªFruitå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„Fruitï¼Œè€Œflistå¯èƒ½åªæƒ³æŸç§ç‰¹å®šç±»å‹çš„Fruitï¼Œç¼–è¯‘å™¨æ— æ³•è¯†åˆ«æ‰€ä»¥ä¼šæŠ¥é”™ã€‚ğŸ’¯</p> <p>æ‰€ä»¥å¯¹äºå®ç°äº†<code>&lt;? extends T&gt;</code>çš„é›†åˆç±»åªèƒ½å°†å®ƒè§†ä¸ºProducerå‘å¤–æä¾›(get)å…ƒç´ ï¼Œè€Œä¸èƒ½ä½œä¸ºConsumeræ¥å¯¹å¤–è·å–(add)å…ƒç´ ã€‚â¤ï¸</p> <p>å¦‚æœæˆ‘ä»¬è¦addå…ƒç´ åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨<code>&lt;? super T&gt;</code>ğŸ˜„</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericWriting</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span> apples <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span> fruit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">writeExact</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">T</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">writeExact</span><span class="token punctuation">(</span>apples<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeExact</span><span class="token punctuation">(</span>fruit<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">writeWithWildcard</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">T</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">writeWithWildcard</span><span class="token punctuation">(</span>apples<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeWithWildcard</span><span class="token punctuation">(</span>fruit<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>è¿™æ ·æˆ‘ä»¬å¯ä»¥å¾€å®¹å™¨é‡Œé¢æ·»åŠ å…ƒç´ äº†ï¼Œä½†æ˜¯ä½¿ç”¨superçš„åå¤„æ˜¯ä»¥åä¸èƒ½getå®¹å™¨é‡Œé¢çš„å…ƒç´ äº†ï¼Œ
åŸå› å¾ˆç®€å•ï¼Œæˆ‘ä»¬ç»§ç»­ä»ç¼–è¯‘å™¨çš„è§’åº¦è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼Œå¯¹äº<code>List&lt;? super Apple&gt; list</code>ï¼Œå®ƒå¯ä»¥æœ‰ä¸‹é¢å‡ ç§å«ä¹‰ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Fruit</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Apple</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å½“æˆ‘ä»¬å°è¯•é€šè¿‡listæ¥getä¸€ä¸ªAppleçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šgetå¾—åˆ°ä¸€ä¸ªFruitï¼Œè¿™ä¸ªFruitå¯ä»¥æ˜¯Orangeç­‰å…¶ä»–ç±»å‹çš„Fruitã€‚</p> <p>æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä¸€æ¡è§„å¾‹ï¼Œ<strong>&quot;Producer Extends, Consumer Super&quot;</strong></p> <p>-ğŸ”¥----PECS-----ğŸ”¥</p> <ul><li>â€œProducer Extendsâ€ â€“ å¦‚æœä½ éœ€è¦ä¸€ä¸ªåªè¯»Listï¼Œç”¨å®ƒæ¥produce Tï¼Œé‚£ä¹ˆä½¿ç”¨<code>? extends T</code></li> <li>â€œConsumer Superâ€ â€“ å¦‚æœä½ éœ€è¦ä¸€ä¸ªåªå†™Listï¼Œç”¨å®ƒæ¥consume Tï¼Œé‚£ä¹ˆä½¿ç”¨<code>? super T</code>
-ğŸ”¥----PESC-----ğŸ”¥</li></ul> <p>å¦‚æœéœ€è¦åŒæ—¶è¯»å–ä»¥åŠå†™å…¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨é€šé…ç¬¦äº†ã€‚</p> <p>å¦‚ä½•é˜…è¯»è¿‡ä¸€äº›Javaé›†åˆç±»çš„æºç ï¼Œå¯ä»¥å‘ç°é€šå¸¸æˆ‘ä»¬ä¼šå°†ä¸¤è€…ç»“åˆèµ·æ¥ä¸€èµ·ç”¨ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Collections</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> dest<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            dest<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹ğŸŒ¹</p> <h2 id="_6-ç±»å‹æ“¦é™¤"><a href="#_6-ç±»å‹æ“¦é™¤" class="header-anchor">#</a> 6. ç±»å‹æ“¦é™¤</h2> <p>Javaæ³›å‹ä¸­æœ€ä»¤äººè‹¦æ¼çš„åœ°æ–¹æˆ–è®¸å°±æ˜¯ç±»å‹æ“¦é™¤äº†ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæœ‰C++ç»éªŒçš„ç¨‹åºå‘˜ã€‚ç±»å‹æ“¦é™¤å°±æ˜¯è¯´Javaæ³›å‹åªèƒ½ç”¨äºåœ¨ç¼–è¯‘æœŸé—´çš„é™æ€ç±»å‹æ£€æŸ¥ï¼Œç„¶åç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ä¼šæ“¦é™¤ç›¸åº”çš„ç±»å‹ä¿¡æ¯ï¼Œè¿™æ ·åˆ°äº†è¿è¡ŒæœŸé—´å®é™…ä¸ŠJVMæ ¹æœ¬å°±çŸ¥é“æ³›å‹æ‰€ä»£è¡¨çš„å…·ä½“ç±»å‹ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯å› ä¸ºJavaæ³›å‹æ˜¯1.5ä¹‹åæ‰è¢«å¼•å…¥çš„ï¼Œä¸ºäº†ä¿æŒå‘ä¸‹çš„å…¼å®¹æ€§ï¼Œæ‰€ä»¥åªèƒ½åšç±»å‹æ“¦é™¤æ¥å…¼å®¹ä»¥å‰çš„éæ³›å‹ä»£ç ã€‚å¯¹äºè¿™ä¸€ç‚¹ï¼Œå¦‚æœé˜…è¯»Javaé›†åˆæ¡†æ¶çš„æºç ï¼Œå¯ä»¥å‘ç°æœ‰äº›ç±»å…¶å®å¹¶ä¸æ”¯æŒæ³›å‹ã€‚</p> <p>è¯´äº†è¿™ä¹ˆå¤šï¼Œé‚£ä¹ˆæ³›å‹æ“¦é™¤åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">T</span> data<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ç¼–è¯‘å™¨åšå®Œç›¸åº”çš„ç±»å‹æ£€æŸ¥ä¹‹åï¼Œå®é™…ä¸Šåˆ°äº†è¿è¡ŒæœŸé—´ä¸Šé¢è¿™æ®µä»£ç å®é™…ä¸Šå°†è½¬æ¢æˆï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span> next<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">,</span> <span class="token class-name">Node</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™æ„å‘³ç€ä¸ç®¡æˆ‘ä»¬å£°æ˜<code>Node&lt;String&gt;</code>è¿˜æ˜¯<code>Node&lt;Integer&gt;</code>ï¼Œåˆ°äº†è¿è¡ŒæœŸé—´ï¼ŒJVMç»Ÿç»Ÿè§†ä¸º<code>Node&lt;Object&gt;</code>ã€‚
æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿâ“
è¿™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±é‡æ–°è®¾ç½®boundsäº†ï¼Œå°†ä¸Šé¢çš„ä»£ç ä¿®æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">T</span> data<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™æ ·ç¼–è¯‘å™¨å°±ä¼šå°†Tå‡ºç°çš„åœ°æ–¹æ›¿æ¢æˆ<code>Comparable</code>è€Œä¸å†æ˜¯é»˜è®¤çš„<code>Object</code>äº†ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Comparable</span> data<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Node</span> next<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span> data<span class="token punctuation">,</span> <span class="token class-name">Node</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Comparable</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä¸Šé¢çš„æ¦‚å¿µæˆ–è®¸è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£ï¼Œä½†å…¶å®æ³›å‹æ“¦é™¤å¸¦æ¥çš„é—®é¢˜è¿œè¿œä¸æ­¢è¿™äº›ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç³»ç»Ÿåœ°æ¥çœ‹ä¸€ä¸‹ç±»å‹æ“¦é™¤æ‰€å¸¦æ¥çš„ä¸€äº›é—®é¢˜ï¼Œæœ‰äº›é—®é¢˜åœ¨C++çš„æ³›å‹ä¸­å¯èƒ½ä¸ä¼šé‡è§ï¼Œä½†æ˜¯åœ¨Javaä¸­å´éœ€è¦æ ¼å¤–å°å¿ƒã€‚</p> <h3 id="_6-1-é—®é¢˜ä¸€"><a href="#_6-1-é—®é¢˜ä¸€" class="header-anchor">#</a> 6-1. é—®é¢˜ä¸€</h3> <p>åœ¨Javaä¸­ä¸å…è®¸åˆ›å»ºæ³›å‹æ•°ç»„ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·çš„åšæ³•ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> arrayOfLists <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// compile-time error</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¸æ”¯æŒä¸Šé¢è¿™æ ·çš„åšæ³•å‘¢ï¼Ÿç»§ç»­ä½¿ç”¨é€†å‘æ€ç»´ï¼Œæˆ‘ä»¬ç«™åœ¨ç¼–è¯‘å™¨çš„è§’åº¦æ¥è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚</p> <p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
strings<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">;</span>   <span class="token comment">// OK</span>
strings<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token comment">// An ArrayStoreException is thrown.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¯¹äºä¸Šé¢è¿™æ®µä»£ç è¿˜æ˜¯å¾ˆå¥½ç†è§£ï¼Œå­—ç¬¦ä¸²æ•°ç»„ä¸èƒ½å­˜æ”¾æ•´å‹å…ƒç´ ï¼Œè€Œä¸”è¿™æ ·çš„é”™è¯¯å¾€å¾€è¦ç­‰åˆ°ä»£ç è¿è¡Œçš„æ—¶å€™æ‰èƒ½å‘ç°ï¼Œç¼–è¯‘å™¨æ˜¯æ— æ³•è¯†åˆ«çš„ã€‚
æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹å‡è®¾Javaæ”¯æŒæ³›å‹æ•°ç»„çš„åˆ›å»ºä¼šå‡ºç°ä»€ä¹ˆåæœï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> stringLists <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// compiler error, but pretend it's allowed</span>
stringLists<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// OK</span>
<span class="token comment">// An ArrayStoreException should be thrown, but the runtime can't detect it.</span>
stringLists<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å‡è®¾æˆ‘ä»¬æ”¯æŒæ³›å‹æ•°ç»„çš„åˆ›å»ºï¼Œç”±äºè¿è¡Œæ—¶æœŸç±»å‹ä¿¡æ¯å·²ç»è¢«æ“¦é™¤ï¼ŒJVMå®é™…ä¸Šæ ¹æœ¬å°±ä¸çŸ¥é“<code>new ArrayList&lt;String&gt;()</code>å’Œ<code>new ArrayList&lt;Integer&gt;()</code>çš„åŒºåˆ«ã€‚
ç±»ä¼¼è¿™æ ·çš„é”™è¯¯å‡å¦‚å‡ºç°æ‰å®é™…çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå°†éå¸¸éš¾ä»¥å¯Ÿè§‰ã€‚</p> <p>å¦‚æœä½ å¯¹ä¸Šé¢è¿™ä¸€ç‚¹è¿˜æŠ±æœ‰æ€€ç–‘çš„è¯ï¼Œå¯ä»¥å°è¯•è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ErasedTypeEquivalence</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span> c2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1 <span class="token operator">==</span> c2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-2-é—®é¢˜äºŒ"><a href="#_6-2-é—®é¢˜äºŒ" class="header-anchor">#</a> 6-2. é—®é¢˜äºŒ</h3> <p>ç»§ç»­å¤ç”¨æˆ‘ä»¬ä¸Šé¢çš„Nodeçš„ç±»ï¼Œå¯¹äºæ³›å‹ä»£ç ï¼ŒJavaç¼–è¯‘å™¨å®é™…ä¸Šè¿˜ä¼šå·å·å¸®æˆ‘ä»¬å®ç°ä¸€ä¸ªBridge methodã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> data<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">T</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Node.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyNode</span> <span class="token keyword">extends</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">MyNode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyNode.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>çœ‹å®Œä¸Šé¢çš„åˆ†æä¹‹åï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºåœ¨ç±»å‹æ“¦é™¤åï¼Œç¼–è¯‘å™¨ä¼šå°†Nodeå’ŒMyNodeå˜æˆä¸‹é¢è¿™æ ·ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Node.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyNode</span> <span class="token keyword">extends</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">MyNode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">super</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyNode.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å®é™…ä¸Šä¸æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œè¿™æ®µä»£ç è¿è¡Œçš„æ—¶å€™ä¼šæŠ›å‡º<code>ClassCastException</code>å¼‚å¸¸ï¼Œæç¤º<code>String</code>æ— æ³•è½¬æ¢æˆ<code>Integer</code>ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">MyNode</span> mn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyNode</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Node</span> n <span class="token operator">=</span> mn<span class="token punctuation">;</span> <span class="token comment">// A raw type - compiler throws an unchecked warning</span>
n<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Causes a ClassCastException to be thrown.</span>
<span class="token comment">// Integer x = mn.data;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å¦‚æœæŒ‰ç…§æˆ‘ä»¬ä¸Šé¢ç”Ÿæˆçš„ä»£ç ï¼Œè¿è¡Œåˆ°ç¬¬3è¡Œçš„æ—¶å€™ä¸åº”è¯¥æŠ¥é”™(æ³¨æ„æˆ‘æ³¨é‡Šæ‰äº†ç¬¬4è¡Œ)ï¼Œå› ä¸ºMyNodeä¸­ä¸å­˜åœ¨setData(String data)æ–¹æ³•ï¼Œæ‰€ä»¥åªèƒ½è°ƒç”¨çˆ¶ç±»Nodeçš„setData(Object data)æ–¹æ³•ï¼Œæ—¢ç„¶è¿™æ ·ä¸Šé¢çš„ç¬¬3è¡Œä»£ç ä¸åº”è¯¥æŠ¥é”™ï¼Œå› ä¸ºStringå½“ç„¶å¯ä»¥è½¬æ¢æˆObjectäº†ï¼Œé‚£ClassCastExceptionåˆ°åº•æ˜¯æ€ä¹ˆæŠ›å‡ºçš„ï¼Ÿ</p> <p>å®é™…ä¸ŠJavaç¼–è¯‘å™¨å¯¹ä¸Šé¢ä»£ç è‡ªåŠ¨è¿˜åšäº†ä¸€ä¸ªå¤„ç†ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">MyNode</span> <span class="token keyword">extends</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
    <span class="token comment">// Bridge method generated by the compiler</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyNode.setData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä¸Šé¢ä¼šæŠ¥é”™çš„åŸå› äº†ï¼ŒsetData((Integer) data);çš„æ—¶å€™Stringæ— æ³•è½¬æ¢æˆIntegerã€‚
æ‰€ä»¥ä¸Šé¢ç¬¬2è¡Œç¼–è¯‘å™¨æç¤ºunchecked warningçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸èƒ½é€‰æ‹©å¿½ç•¥ï¼Œä¸ç„¶è¦ç­‰åˆ°è¿è¡ŒæœŸé—´æ‰èƒ½å‘ç°å¼‚å¸¸ã€‚
å¦‚æœæˆ‘ä»¬ä¸€å¼€å§‹åŠ ä¸Š<code>Node&lt;Integer&gt; n = mn</code>å°±å¥½äº†ï¼Œè¿™æ ·ç¼–è¯‘å™¨å°±å¯ä»¥æå‰å¸®æˆ‘ä»¬å‘ç°é”™è¯¯ã€‚</p> <h3 id="_6-3-é—®é¢˜ä¸‰"><a href="#_6-3-é—®é¢˜ä¸‰" class="header-anchor">#</a> 6-3. é—®é¢˜ä¸‰</h3> <p>æ­£å¦‚æˆ‘ä»¬ä¸Šé¢æåˆ°çš„ï¼ŒJavaæ³›å‹å¾ˆå¤§ç¨‹åº¦ä¸Šåªèƒ½æä¾›é™æ€ç±»å‹æ£€æŸ¥ï¼Œç„¶åç±»å‹çš„ä¿¡æ¯å°±ä¼šè¢«æ“¦é™¤ï¼Œæ‰€ä»¥åƒä¸‹é¢è¿™æ ·åˆ©ç”¨ç±»å‹å‚æ•°åˆ›å»ºå®ä¾‹çš„åšæ³•ç¼–è¯‘å™¨ä¸ä¼šé€šè¿‡ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">E</span> elem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">E</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// compile-time error</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä½†æ˜¯å¦‚æœæŸäº›åœºæ™¯æˆ‘ä»¬æƒ³è¦éœ€è¦åˆ©ç”¨ç±»å‹å‚æ•°åˆ›å»ºå®ä¾‹ï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå¯ä»¥åˆ©ç”¨åå°„è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> cls<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">E</span> elem <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// OK</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·è°ƒç”¨ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">append</span><span class="token punctuation">(</span>ls<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å®é™…ä¸Šå¯¹äºä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œè¿˜å¯ä»¥é‡‡ç”¨Factoryå’ŒTemplateä¸¤ç§è®¾è®¡æ¨¡å¼è§£å†³ï¼Œ
æ„Ÿå…´è¶£çš„æœ‹å‹ä¸å¦¨å»çœ‹ä¸€ä¸‹Thinking in Javaä¸­ç¬¬15ç« ä¸­å…³äºCreating instance of types(è‹±æ–‡ç‰ˆç¬¬664é¡µ)çš„è®²è§£ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸æ·±å…¥äº†ã€‚</p> <h3 id="_6-4-é—®é¢˜å››"><a href="#_6-4-é—®é¢˜å››" class="header-anchor">#</a> 6-4. é—®é¢˜å››</h3> <p>æˆ‘ä»¬æ— æ³•å¯¹æ³›å‹ä»£ç ç›´æ¥ä½¿ç”¨instanceofå…³é”®å­—ï¼Œå› ä¸ºJavaç¼–è¯‘å™¨åœ¨ç”Ÿæˆä»£ç çš„æ—¶å€™ä¼šæ“¦é™¤æ‰€æœ‰ç›¸å…³æ³›å‹çš„ç±»å‹ä¿¡æ¯ï¼Œ
æ­£å¦‚æˆ‘ä»¬ä¸Šé¢éªŒè¯è¿‡çš„JVMåœ¨è¿è¡Œæ—¶æœŸæ— æ³•è¯†åˆ«å‡º<code>ArrayList&lt;Integer&gt;</code>å’Œ<code>ArrayList&lt;String&gt;</code>çš„ä¹‹é—´çš„åŒºåˆ«ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">rtti</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token keyword">instanceof</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// compile-time error</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å’Œä¸Šé¢ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€šé…ç¬¦é‡æ–°è®¾ç½®boundsæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">rtti</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token keyword">instanceof</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// OK; instanceof requires a reifiable type</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_7-å·¥å‚æ¨¡å¼"><a href="#_7-å·¥å‚æ¨¡å¼" class="header-anchor">#</a> 7. å·¥å‚æ¨¡å¼</h2> <p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ©ç”¨æ³›å‹æ¥ç®€å•çš„å®ç°ä¸€ä¸‹å·¥å‚æ¨¡å¼ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆå£°æ˜ä¸€ä¸ªæ¥å£Factoryï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">typeinfo<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Factory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">T</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ›å»ºå‡ ä¸ªå®ä½“ç±»FuelFilterå’ŒAirFilterä»¥åŠFanBeltå’ŒGeneratorBeltã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Filter</span> <span class="token keyword">extends</span> <span class="token class-name">Part</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">FuelFilter</span> <span class="token keyword">extends</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token keyword">implements</span> typeinfo<span class="token punctuation">.</span>factory<span class="token punctuation">.</span><span class="token class-name">Factory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FuelFilter</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">FuelFilter</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FuelFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">AirFilter</span> <span class="token keyword">extends</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token keyword">implements</span> typeinfo<span class="token punctuation">.</span>factory<span class="token punctuation">.</span><span class="token class-name">Factory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AirFilter</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">AirFilter</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AirFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Belt</span> <span class="token keyword">extends</span> <span class="token class-name">Part</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">FanBelt</span> <span class="token keyword">extends</span> <span class="token class-name">Belt</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token keyword">implements</span> typeinfo<span class="token punctuation">.</span>factory<span class="token punctuation">.</span><span class="token class-name">Factory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FanBelt</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">FanBelt</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FanBelt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">GeneratorBelt</span> <span class="token keyword">extends</span> <span class="token class-name">Belt</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token keyword">implements</span> typeinfo<span class="token punctuation">.</span>factory<span class="token punctuation">.</span><span class="token class-name">Factory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GeneratorBelt</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">GeneratorBelt</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">GeneratorBelt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>Partç±»çš„å®ç°å¦‚ä¸‹ï¼Œæ³¨æ„æˆ‘ä»¬ä¸Šé¢çš„å®ä½“ç±»éƒ½æ˜¯Partç±»çš„é—´æ¥å­ç±»ã€‚åœ¨Partç±»æˆ‘ä»¬æ³¨å†Œäº†æˆ‘ä»¬ä¸Šé¢çš„å£°æ˜çš„å®ä½“ç±»ã€‚æ‰€ä»¥ä»¥åæˆ‘ä»¬å¦‚æœè¦åˆ›å»ºç›¸å…³çš„å®ä½“ç±»çš„è¯ï¼Œåªéœ€è¦åœ¨è°ƒç”¨Partç±»çš„ç›¸å…³æ–¹æ³•äº†ã€‚
è¿™ä¹ˆåšçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯å¦‚æœçš„ä¸šåŠ¡ä¸­å‡ºç°äº†CabinAirFilteræˆ–è€…PowerSteeringBeltçš„è¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹å¤ªå¤šçš„ä»£ç ï¼Œåªéœ€è¦åœ¨Partç±»ä¸­å°†å®ƒä»¬æ³¨å†Œå³å¯ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Part</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Factory</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Part</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> partFactories <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Factory</span><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Part</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        partFactories<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FuelFilter</span><span class="token punctuation">.</span><span class="token class-name">Factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        partFactories<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AirFilter</span><span class="token punctuation">.</span><span class="token class-name">Factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        partFactories<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FanBelt</span><span class="token punctuation">.</span><span class="token class-name">Factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        partFactories<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PowerSteeringBelt</span><span class="token punctuation">.</span><span class="token class-name">Factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Random</span> rand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Part</span> <span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> rand<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>partFactories<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> partFactories<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>æœ€åæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegisteredFactories</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Part</span><span class="token punctuation">.</span><span class="token function">createRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ORACLE-DOCUMENTATION
https://docs.oracle.com/javase/tutorial/java/generics/index.html</p> <p>THINKING IN JAVA
http://mindview.net/Books/TIJ4</p> <p>EFFECTIVE JAVA
https://www.safaribooksonline.com/library/view/effective-java-2nd/9780137150021/</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/24/2020, 6:50:47 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/source-files/java/optional.html" class="prev">
        java-8-Optional
      </a></span> <span class="next"><a href="/source-files/java/stream.html">
        JavaStreamAPI
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/source-files/assets/js/app.10d876f2.js" defer></script><script src="/source-files/assets/js/2.98231419.js" defer></script><script src="/source-files/assets/js/34.f1e2df77.js" defer></script>
  </body>
</html>
