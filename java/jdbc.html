<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jdbc | wums</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="wums note">
    <link rel="preload" href="/source-files/assets/css/0.styles.65bc254d.css" as="style"><link rel="preload" href="/source-files/assets/js/app.7f178734.js" as="script"><link rel="preload" href="/source-files/assets/js/2.6ef31ef9.js" as="script"><link rel="preload" href="/source-files/assets/js/12.61ba9b2e.js" as="script"><link rel="prefetch" href="/source-files/assets/js/10.bb5c8724.js"><link rel="prefetch" href="/source-files/assets/js/11.e406a39f.js"><link rel="prefetch" href="/source-files/assets/js/13.af2d72b3.js"><link rel="prefetch" href="/source-files/assets/js/14.36234bf7.js"><link rel="prefetch" href="/source-files/assets/js/15.c394e3d4.js"><link rel="prefetch" href="/source-files/assets/js/16.be6df2db.js"><link rel="prefetch" href="/source-files/assets/js/17.9e8ceedd.js"><link rel="prefetch" href="/source-files/assets/js/18.e1c0321a.js"><link rel="prefetch" href="/source-files/assets/js/19.2da74833.js"><link rel="prefetch" href="/source-files/assets/js/20.e5673162.js"><link rel="prefetch" href="/source-files/assets/js/21.fde8fbc4.js"><link rel="prefetch" href="/source-files/assets/js/22.c696124c.js"><link rel="prefetch" href="/source-files/assets/js/23.dec40798.js"><link rel="prefetch" href="/source-files/assets/js/24.3daac1bc.js"><link rel="prefetch" href="/source-files/assets/js/25.8c3cae2d.js"><link rel="prefetch" href="/source-files/assets/js/26.5a0cce67.js"><link rel="prefetch" href="/source-files/assets/js/27.b958c07f.js"><link rel="prefetch" href="/source-files/assets/js/28.6cc61f46.js"><link rel="prefetch" href="/source-files/assets/js/29.6e04bd3d.js"><link rel="prefetch" href="/source-files/assets/js/3.6141c375.js"><link rel="prefetch" href="/source-files/assets/js/30.7cd2f5d6.js"><link rel="prefetch" href="/source-files/assets/js/31.4fb132c2.js"><link rel="prefetch" href="/source-files/assets/js/32.63f9f4ef.js"><link rel="prefetch" href="/source-files/assets/js/33.128cd606.js"><link rel="prefetch" href="/source-files/assets/js/34.2824fb6c.js"><link rel="prefetch" href="/source-files/assets/js/35.e41a0dad.js"><link rel="prefetch" href="/source-files/assets/js/36.2754cee0.js"><link rel="prefetch" href="/source-files/assets/js/37.f55f5936.js"><link rel="prefetch" href="/source-files/assets/js/38.ae050ea7.js"><link rel="prefetch" href="/source-files/assets/js/39.d7760194.js"><link rel="prefetch" href="/source-files/assets/js/4.d76f0767.js"><link rel="prefetch" href="/source-files/assets/js/40.64e139e7.js"><link rel="prefetch" href="/source-files/assets/js/41.e37014fc.js"><link rel="prefetch" href="/source-files/assets/js/42.dd06cf38.js"><link rel="prefetch" href="/source-files/assets/js/43.607a6d8c.js"><link rel="prefetch" href="/source-files/assets/js/44.86f3c298.js"><link rel="prefetch" href="/source-files/assets/js/45.59385537.js"><link rel="prefetch" href="/source-files/assets/js/46.04da6ef6.js"><link rel="prefetch" href="/source-files/assets/js/47.d44317fb.js"><link rel="prefetch" href="/source-files/assets/js/48.c577aacc.js"><link rel="prefetch" href="/source-files/assets/js/49.8a2e2bbb.js"><link rel="prefetch" href="/source-files/assets/js/5.17e27241.js"><link rel="prefetch" href="/source-files/assets/js/50.aa2d97e6.js"><link rel="prefetch" href="/source-files/assets/js/51.ea141bc7.js"><link rel="prefetch" href="/source-files/assets/js/52.098853b4.js"><link rel="prefetch" href="/source-files/assets/js/53.414199b8.js"><link rel="prefetch" href="/source-files/assets/js/54.7aafa658.js"><link rel="prefetch" href="/source-files/assets/js/55.011f35e0.js"><link rel="prefetch" href="/source-files/assets/js/56.773b293e.js"><link rel="prefetch" href="/source-files/assets/js/57.0dd4e78a.js"><link rel="prefetch" href="/source-files/assets/js/58.b57c957a.js"><link rel="prefetch" href="/source-files/assets/js/59.ec1115a7.js"><link rel="prefetch" href="/source-files/assets/js/6.ea86a040.js"><link rel="prefetch" href="/source-files/assets/js/60.106d55d4.js"><link rel="prefetch" href="/source-files/assets/js/61.4945e711.js"><link rel="prefetch" href="/source-files/assets/js/62.b05b7699.js"><link rel="prefetch" href="/source-files/assets/js/7.e5cd0322.js"><link rel="prefetch" href="/source-files/assets/js/8.bef3d365.js"><link rel="prefetch" href="/source-files/assets/js/9.28ed91f3.js">
    <link rel="stylesheet" href="/source-files/assets/css/0.styles.65bc254d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/source-files/" class="home-link router-link-active"><!----> <span class="site-name">wums</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/source-files/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://gitee.com/wmsnote/dashboard/wikis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WiKi
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://gitee.com/wmsnote/source-files" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitEE
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/source-files/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://gitee.com/wmsnote/dashboard/wikis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WiKi
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://gitee.com/wmsnote/source-files" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitEE
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/shell/" class="sidebar-heading clickable"><span>shell</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/设计模式/" class="sidebar-heading clickable"><span>设计模式</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/prometheus/" class="sidebar-heading clickable"><span>prometheus</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/travis-ci/" class="sidebar-heading clickable"><span>travis-ci教程</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/Dockerfile/" class="sidebar-heading clickable"><span>Dockerfile</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/java/" class="sidebar-heading clickable router-link-active open"><span>Java教程</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/source-files/java/jdbc.html" class="active sidebar-link">jdbc</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#基本流程步骤" class="sidebar-link">基本流程步骤</a></li><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#dbutil" class="sidebar-link">DBUtil</a></li><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#insert数据" class="sidebar-link">insert数据</a></li><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#update数据" class="sidebar-link">update数据</a></li><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#delete数据" class="sidebar-link">delete数据</a></li><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#select数据" class="sidebar-link">select数据</a></li><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#statement和preparestatement区别" class="sidebar-link">Statement和PrepareStatement区别</a></li><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#jdbc事物" class="sidebar-link">JDBC事物</a></li><li class="sidebar-sub-header"><a href="/source-files/java/jdbc.html#jdbc批量处理" class="sidebar-link">JDBC批量处理</a></li></ul></li><li><a href="/source-files/java/apacheCommons.html" class="sidebar-link">apache-commons</a></li><li><a href="/source-files/java/optional.html" class="sidebar-link">java-8-Optional</a></li><li><a href="/source-files/java/泛型详解.html" class="sidebar-link">Java泛型详解</a></li><li><a href="/source-files/java/stream.html" class="sidebar-link">JavaStreamAPI</a></li><li><a href="/source-files/java/8新特性分析.html" class="sidebar-link">JAVA8新特性分析</a></li><li><a href="/source-files/java/多线程实现的三种方式.html" class="sidebar-link">Java多线程实现的三种方式</a></li><li><a href="/source-files/java/map遍历.html" class="sidebar-link">map遍历</a></li><li><a href="/source-files/java/spring扫描自定义注解并进行操作.html" class="sidebar-link">spring扫描自定义注解并进行操作</a></li><li><a href="/source-files/java/反射提高扩展性.html" class="sidebar-link">反射-提高扩展性</a></li><li><a href="/source-files/java/注解的定义和反射.html" class="sidebar-link">注解的定义和反射</a></li><li><a href="/source-files/java/获取指定包下所有自定义注解并提取注解信息.html" class="sidebar-link">获取指定包下所有自定义注解并提取注解信息</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/springboot2/" class="sidebar-heading clickable"><span>SpringBoot2.x</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jdbc"><a href="#jdbc" class="header-anchor">#</a> jdbc</h1> <h2 id="基本流程步骤"><a href="#基本流程步骤" class="header-anchor">#</a> 基本流程步骤</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>		<span class="token comment">//1.加載驅動程序</span>
		<span class="token comment">//	Class.forName(driverClass);</span>
		<span class="token comment">//	加載mysql驅動		Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span>
		<span class="token comment">//	加載oracle驅動	Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);</span>
		<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//2.獲取數據庫鏈接</span>
		<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/imooc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1234&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//3.創建statement\PreparedStatement對象</span>
		<span class="token comment">//conn.prepareStatement(sql);</span>
		<span class="token class-name">Statement</span> statement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//4.通過statement創建查詢</span>
		<span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//5.從結果集中獲取下一行數據,指針同時移動到下一行</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          
			<span class="token comment">//通過field名獲取字段值</span>
			<span class="token class-name">String</span> username <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> password <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          
			<span class="token comment">//通過字段角標獲取字段值</span>
			<span class="token class-name">String</span> username <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//6.关闭资源</span>
		resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="dbutil"><a href="#dbutil" class="header-anchor">#</a> DBUtil</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DBUtil</span> <span class="token punctuation">{</span>
	
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> URL <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/imooc&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> USERNAME <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> PASSWORD <span class="token operator">=</span> <span class="token string">&quot;1234&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> conn<span class="token punctuation">;</span>
	<span class="token comment">//静态代码块先执行且只执行一次,获取数据库connection</span>
	<span class="token keyword">static</span> <span class="token punctuation">{</span>	
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					 conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>URL<span class="token punctuation">,</span> USERNAME<span class="token punctuation">,</span> PASSWORD<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// TODO Auto-generated catch block</span>
					e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// TODO Auto-generated catch block</span>
					e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
		
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> conn<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="insert数据"><a href="#insert数据" class="header-anchor">#</a> insert数据</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">//获取数据库链接</span>
		<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DBUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//创建预编译Statement  </span>
		<span class="token class-name">PreparedStatement</span> prepareStatement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;insert into user (username,password) values (?,?)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//给预编译传参数赋值</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;woms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//执行sql</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="update数据"><a href="#update数据" class="header-anchor">#</a> update数据</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">//获取数据库链接</span>
		<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DBUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//创建预编译Statement  </span>
		<span class="token class-name">PreparedStatement</span> prepareStatement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;update  user set username = ? and password = ? where id = ?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//给预编译传参数赋值</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;woms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1232132131</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//执行sql</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="delete数据"><a href="#delete数据" class="header-anchor">#</a> delete数据</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">//获取数据库链接</span>
		<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DBUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//创建预编译Statement  </span>
		<span class="token class-name">PreparedStatement</span> prepareStatement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;delete from user where id = ?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//给预编译传参数赋值</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1232132131</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//执行sql</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="select数据"><a href="#select数据" class="header-anchor">#</a> select数据</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">//获取数据库链接</span>
		<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DBUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//创建预编译Statement  </span>
		<span class="token class-name">PreparedStatement</span> prepareStatement <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user where id = ?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//给预编译传参数赋值</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1232132131</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//执行sql</span>
		<span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> prepareStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">String</span> username <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//String username = resultSet.getString(1);通过索引index查询field</span>
		<span class="token punctuation">}</span>
		resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		prepareStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="statement和preparestatement区别"><a href="#statement和preparestatement区别" class="header-anchor">#</a> Statement和PrepareStatement区别</h2> <blockquote><p>Statement和PrepareStatement可以认为是与数据库的一次交互,可以执行多sql语句(包括insert,update,select,delete)</p></blockquote> <ol><li><p>preparedstatement预处理sql减少sql执行,支持批处理效率更高; statement在对数据库只执行一次性存取的时侯，用 Statement 对象进行处理。PreparedStatement对象的开销比Statement大，对于一次性操作并不会带来额外的好处。</p></li> <li><p>prepareStatement可以替换变量?动态参数化防止sql注入</p> <p>​</p></li></ol> <h2 id="jdbc事物"><a href="#jdbc事物" class="header-anchor">#</a> JDBC事物</h2> <p>如果JDBC连接处于自动提交模式，默认情况下，则每个SQL语句在完成后都会提交到数据库。</p> <p>对于简单的应用程序可能没有问题，但是有三个原因需要考虑是否关闭自动提交并管理自己的事务 -</p> <ul><li>提高性能</li> <li>保持业务流程的完整性</li> <li>使用分布式事务</li></ul> <p>事务能够控制何时更改提交并应用于数据库。 它将单个SQL语句或一组SQL语句视为一个逻辑单元，如果任何语句失败，整个事务将失败。</p> <p>要启用手动事务支持，而不是使用JDBC驱动程序默认使用的自动提交模式，请调用<code>Connection</code>对象的<code>setAutoCommit()</code>方法。 如果将布尔的<code>false</code>传递给<code>setAutoCommit()</code>，则关闭自动提交。 也可以传递一个布尔值<code>true</code>来重新打开它。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//设置事物自动提交为手动</span>
conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//提交事物</span>
conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//回滚事物</span>
conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>http://www.yiibai.com/jdbc/jdbc-transactions.html</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span><span class="token punctuation">{</span>
   <span class="token comment">//Assume a valid connection object conn</span>
   conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token class-name">String</span> SQL <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO Employees  &quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;VALUES (106, 20, 'Rita', 'Tez')&quot;</span><span class="token punctuation">;</span>
   stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>  
   <span class="token comment">//Submit a malformed SQL statement that breaks</span>
   <span class="token class-name">String</span> SQL <span class="token operator">=</span> <span class="token string">&quot;INSERTED IN Employees  &quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;VALUES (107, 22, 'Sita', 'Singh')&quot;</span><span class="token punctuation">;</span>
   stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// If there is no error.</span>
   conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SQLException</span> se<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">// If there is any error.</span>
   conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="jdbc批量处理"><a href="#jdbc批量处理" class="header-anchor">#</a> JDBC批量处理</h2> <p>批量处理允许将相关的SQL语句分组到批处理中，并通过对数据库的一次调用来提交它们，一次执行完成与数据库之间的交互。</p> <p>一次向数据库发送多个SQL语句时，可以减少通信开销，从而提高性能。</p> <ul><li>不需要JDBC驱动程序来支持此功能。应该使用<code>DatabaseMetaData.supportsBatchUpdates()</code>方法来确定目标数据库是否支持批量更新处理。如果JDBC驱动程序支持此功能，该方法将返回<code>true</code>。</li> <li><code>Statement</code>，<code>PreparedStatement</code>和<code>CallableStatement</code>的<code>addBatch()</code>方法用于将单个语句添加到批处理。 <code>executeBatch()</code>用于执行组成批量的所有语句。</li> <li><code>executeBatch()</code>返回一个整数数组，数组的每个元素表示相应更新语句的更新计数。</li> <li>就像将批处理语句添加到处理中一样，可以使用<code>clearBatch()</code>方法删除它们。此方法将删除所有使用<code>addBatch()</code>方法添加的语句。 但是，无法指定选择某个要删除的语句。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Create SQL statement</span>
<span class="token class-name">String</span> SQL <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO Employees (id, first, last, age) &quot;</span> <span class="token operator">+</span>
             <span class="token string">&quot;VALUES(?, ?, ?, ?)&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// Create PrepareStatement object</span>
<span class="token class-name">PreparedStatemen</span> pstmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Set auto-commit to false</span>
conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set the variables</span>
pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">400</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;JDBC&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;Li&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">33</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Add it to the batch</span>
pstmt<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set the variables</span>
pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">401</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;CSharp&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
pstmt<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;Liang&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
pstmt<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">31</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Add it to the batch</span>
pstmt<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//add more batches</span>
<span class="token punctuation">.</span>
<span class="token punctuation">.</span>
<span class="token punctuation">.</span>
<span class="token punctuation">.</span>
<span class="token comment">//Create an int[] to hold returned values</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> count <span class="token operator">=</span> stmt<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Explicitly commit statements to apply changes</span>
conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/24/2020, 5:58:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/source-files/Dockerfile/vue.html" class="prev">
        Vue
      </a></span> <span class="next"><a href="/source-files/java/apacheCommons.html">
        apache-commons
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/source-files/assets/js/app.7f178734.js" defer></script><script src="/source-files/assets/js/2.6ef31ef9.js" defer></script><script src="/source-files/assets/js/12.61ba9b2e.js" defer></script>
  </body>
</html>
