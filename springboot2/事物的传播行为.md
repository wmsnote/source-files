## 1. 传播属性

|传播性 | 值 | 描述|
|-----|-----|-----|
|REQUIRED | 0  | 支持当前事物，如果没有就新建事物|
|SUPPORTS  | 1  | 支持当前事物，如果没有就不以事物的方式运行|
|MANDATORY  | 2  | 支持当前事物，如果当前没有事物就抛异常|
|REQUIRES_NEW  | 3  | 无论调用者是否有事务，被调用者都会新建一个事务|
|NOT_SUPPORTED  | 4  | 不支持事物，如果当前有事物，将当前事物挂起，不以事物的方式运行|
|NEVER  | 5  | 不支持事物，如果有事物就抛异常|
|NESTED | 6  | 如果当前存在事物，就在当前事物中再新起一个事物|



### :one: PROPAGATION_REQUIRED

* 支持当前事物，如果没有就新建事物
* 上游如果有事物，上游和下游就共处一个事物里面
* 上游如果没有事物，下游就新建一个事物（上游无事物，下游有事物）

### :cn: PROPAGATION_SUPPORTS

* 被调用者是否有事务，完全依赖于调用者，调用者有事务则有事务，调用者没事务则没事务。
* 上游没有事物，下游也没有事物
* 上游有事物，下游和上游共处一个事物里面

### :v: PROPAGATION_MANDATORY

* 支持当前事务，如果当前没事务就抛异常
* 上游有事物，上游和下游都在一个事物里
* 上游没有事物，下游直接抛出异常了

### :fire: PROPAGATION_REQUIRES_NEW

* 此传播属性下，无论调用者是否有事务，被调用者都会新建一个事务
* 上游无事物，下游新建一个事物，上游无事物，下游有事物
* 上游有事物，下游新建一个事物，上游一个事物，下游一个事物，两个事物无关，谁异常谁回滚，互不影响

### :smile: PROPAGATION_NOT_SUPPORTED

* 无论调用者是否有事务，被调用者都不以事务的方法运行
* 上游无事物，下游无事物
* 上游有事物，下游仍然无事物，上游抛出异常，上游自己回滚，下游不会回滚，不受管辖

### :heart: PROPAGATION_NEVER

* 调用者有事务，被调用者就会抛出异常
* 上游无事物，下游无事物
* 上游有事物，上游抛异常（上游再调用下游之前，代码运行正常，执行到调用下游的代码时，抛出异常，下游压根不会执行，上游因为有事物，也会回滚）

### :o: PROPAGATION_NESTED

* 此传播属性下，被调用者的事务是调用者的事务的子集。
* 上游无事物，下游新起自己的独立事物，上游无事物，下游有自己的事物
* 上游有事物，对上游来说，上游和下游共处一个事物里，上游有异常，下游也会回滚；
* 对下游来说，下游有异常，上游不会回滚，

可以看出来嵌套事务的本质就是外层会影响内层，内层不影响外层。而REQUIRES_NEW则是互不影响。




