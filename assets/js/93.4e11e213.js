(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{419:function(s,a,t){"use strict";t.r(a);var n=t(9),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"jvm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jvm"}},[s._v("#")]),s._v(" jvm")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("含义")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("-XX:MetaspaceSize=128m")]),s._v(" "),t("td",[s._v("（元空间默认大小）")])]),s._v(" "),t("tr",[t("td",[s._v("-XX:MaxMetaspaceSize=128m")]),s._v(" "),t("td",[s._v("（元空间最大大小）")])]),s._v(" "),t("tr",[t("td",[s._v("-Xms1024m")]),s._v(" "),t("td",[s._v("（堆最大大小）")])]),s._v(" "),t("tr",[t("td",[s._v("-Xmx1024m")]),s._v(" "),t("td",[s._v("（堆默认大小）")])]),s._v(" "),t("tr",[t("td",[s._v("-Xmn256m")]),s._v(" "),t("td",[s._v("（新生代大小）")])]),s._v(" "),t("tr",[t("td",[s._v("-Xss256k")]),s._v(" "),t("td",[s._v("（棧最大深度大小）")])]),s._v(" "),t("tr",[t("td",[s._v("-XX:SurvivorRatio=8")]),s._v(" "),t("td",[s._v("（新生代分区比例 8 : 2 ）")])]),s._v(" "),t("tr",[t("td",[s._v("-XX:+UseConcMarkSweepGC")]),s._v(" "),t("td",[s._v("（指定使用的垃圾收集器，这里使用CMS收集器）")])]),s._v(" "),t("tr",[t("td",[s._v("-XX:+PrintGCDetails")]),s._v(" "),t("td",[s._v("（打印详细的GC日志）")])])])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ java -jar "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:MetaspaceSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("128m "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:MaxMetaspaceSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("128m "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-Xms1024m "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-Xmx1024m "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-Xmn512m "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-Xss256k "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:SurvivorRatio"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:ParallelGCThreads"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:+UseConcMarkSweepGC "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:+PrintGCDetails "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:+PrintTenuringDistribution "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:+PrintGCTimeStamps "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:+HeapDumpOnOutOfMemoryError "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:HeapDumpPath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-Xloggc:/gc.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:+UseGCLogFileRotation "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:NumberOfGCLogFiles"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-XX:GCLogFileSize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("10M "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nnewframe-1.0.0.jar\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("hr"),s._v(" "),t("p",[t("strong",[s._v("下面是公司实战的一个配置")])]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" registry.cn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("hangzhou.aliyuncs.com/ci"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("base/jre"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("alpine"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("latest\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 8887\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /app\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" ./target/bigbay"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("h5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("payment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("0.0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("SNAPSHOT.jar /app/bigbay"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("h5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("payment.jar\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" JAVA_OPTS="),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\\n-Xmx1g \\\n-Xms1g \\\n-Xmn512m \\\n-XX:SurvivorRatio=8 \\\n-XX:MetaspaceSize=64m \\\n-XX:MaxMetaspaceSize=128m \\\n-XX:ParallelGCThreads=2 \\\n-XX:+UseConcMarkSweepGC \\\n-XX:+PrintGCDetails \\\n-XX:+PrintTenuringDistribution \\\n-XX:+PrintGCTimeStamps \\\n-XX:+HeapDumpOnOutOfMemoryError \\\n-XX:HeapDumpPath=/ \\\n-Xloggc:/gc.log \\\n-XX:+UseGCLogFileRotation \\\n-XX:NumberOfGCLogFiles=5 \\\n-XX:GCLogFileSize=10M"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"java -jar -server ${JAVA_OPTS} -Dfile.encoding=UTF-8 bigbay-h5-payment.jar"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);