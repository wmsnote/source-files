<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. 简介 | wums</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="wums note">
    <link rel="preload" href="/source-files/assets/css/0.styles.6eaab90e.css" as="style"><link rel="preload" href="/source-files/assets/js/app.23990cc4.js" as="script"><link rel="preload" href="/source-files/assets/js/2.a20b4d8f.js" as="script"><link rel="preload" href="/source-files/assets/js/61.c118df0e.js" as="script"><link rel="prefetch" href="/source-files/assets/js/10.b2fd2b20.js"><link rel="prefetch" href="/source-files/assets/js/100.cf10f999.js"><link rel="prefetch" href="/source-files/assets/js/101.6a021dd2.js"><link rel="prefetch" href="/source-files/assets/js/102.03bef6e2.js"><link rel="prefetch" href="/source-files/assets/js/103.7e576c76.js"><link rel="prefetch" href="/source-files/assets/js/104.f2331de6.js"><link rel="prefetch" href="/source-files/assets/js/105.3a54c4bd.js"><link rel="prefetch" href="/source-files/assets/js/106.18521d8d.js"><link rel="prefetch" href="/source-files/assets/js/107.215cb79d.js"><link rel="prefetch" href="/source-files/assets/js/108.c6d549c8.js"><link rel="prefetch" href="/source-files/assets/js/109.897f6a47.js"><link rel="prefetch" href="/source-files/assets/js/11.6cfeb465.js"><link rel="prefetch" href="/source-files/assets/js/110.584f0290.js"><link rel="prefetch" href="/source-files/assets/js/111.1971bf3d.js"><link rel="prefetch" href="/source-files/assets/js/112.d119735b.js"><link rel="prefetch" href="/source-files/assets/js/113.f4155b7e.js"><link rel="prefetch" href="/source-files/assets/js/12.f9fd9730.js"><link rel="prefetch" href="/source-files/assets/js/13.dd009f24.js"><link rel="prefetch" href="/source-files/assets/js/14.772d05f6.js"><link rel="prefetch" href="/source-files/assets/js/15.2dda82ed.js"><link rel="prefetch" href="/source-files/assets/js/16.36e1af8e.js"><link rel="prefetch" href="/source-files/assets/js/17.29110426.js"><link rel="prefetch" href="/source-files/assets/js/18.f96e43ef.js"><link rel="prefetch" href="/source-files/assets/js/19.22a44867.js"><link rel="prefetch" href="/source-files/assets/js/20.86bbfae4.js"><link rel="prefetch" href="/source-files/assets/js/21.c93f8151.js"><link rel="prefetch" href="/source-files/assets/js/22.6a8d8dc7.js"><link rel="prefetch" href="/source-files/assets/js/23.d79240e5.js"><link rel="prefetch" href="/source-files/assets/js/24.30ee928b.js"><link rel="prefetch" href="/source-files/assets/js/25.0a8040de.js"><link rel="prefetch" href="/source-files/assets/js/26.df350862.js"><link rel="prefetch" href="/source-files/assets/js/27.89450194.js"><link rel="prefetch" href="/source-files/assets/js/28.0c0a6e17.js"><link rel="prefetch" href="/source-files/assets/js/29.7d7e6d2c.js"><link rel="prefetch" href="/source-files/assets/js/3.375f299c.js"><link rel="prefetch" href="/source-files/assets/js/30.2cd75ac4.js"><link rel="prefetch" href="/source-files/assets/js/31.46490d17.js"><link rel="prefetch" href="/source-files/assets/js/32.c83ebc2d.js"><link rel="prefetch" href="/source-files/assets/js/33.f7a41714.js"><link rel="prefetch" href="/source-files/assets/js/34.f01db776.js"><link rel="prefetch" href="/source-files/assets/js/35.f6971771.js"><link rel="prefetch" href="/source-files/assets/js/36.f56a5d5f.js"><link rel="prefetch" href="/source-files/assets/js/37.d2f5ed0c.js"><link rel="prefetch" href="/source-files/assets/js/38.357b8e07.js"><link rel="prefetch" href="/source-files/assets/js/39.1271fc22.js"><link rel="prefetch" href="/source-files/assets/js/4.699dc0eb.js"><link rel="prefetch" href="/source-files/assets/js/40.84ebd818.js"><link rel="prefetch" href="/source-files/assets/js/41.9f42589c.js"><link rel="prefetch" href="/source-files/assets/js/42.ebfa0f72.js"><link rel="prefetch" href="/source-files/assets/js/43.7480b80d.js"><link rel="prefetch" href="/source-files/assets/js/44.f7d82c69.js"><link rel="prefetch" href="/source-files/assets/js/45.b6c961ab.js"><link rel="prefetch" href="/source-files/assets/js/46.7f05c4ef.js"><link rel="prefetch" href="/source-files/assets/js/47.0c5629f4.js"><link rel="prefetch" href="/source-files/assets/js/48.61a96f42.js"><link rel="prefetch" href="/source-files/assets/js/49.a9054a50.js"><link rel="prefetch" href="/source-files/assets/js/5.62830c7d.js"><link rel="prefetch" href="/source-files/assets/js/50.484da447.js"><link rel="prefetch" href="/source-files/assets/js/51.0e844814.js"><link rel="prefetch" href="/source-files/assets/js/52.550e8c16.js"><link rel="prefetch" href="/source-files/assets/js/53.d442d871.js"><link rel="prefetch" href="/source-files/assets/js/54.b9b31b2c.js"><link rel="prefetch" href="/source-files/assets/js/55.756cc6ac.js"><link rel="prefetch" href="/source-files/assets/js/56.ad8dd925.js"><link rel="prefetch" href="/source-files/assets/js/57.e3704655.js"><link rel="prefetch" href="/source-files/assets/js/58.407485d7.js"><link rel="prefetch" href="/source-files/assets/js/59.425e199c.js"><link rel="prefetch" href="/source-files/assets/js/6.74e76b69.js"><link rel="prefetch" href="/source-files/assets/js/60.ae9e948d.js"><link rel="prefetch" href="/source-files/assets/js/62.ba8dce5e.js"><link rel="prefetch" href="/source-files/assets/js/63.0f937037.js"><link rel="prefetch" href="/source-files/assets/js/64.3c498335.js"><link rel="prefetch" href="/source-files/assets/js/65.b03adb81.js"><link rel="prefetch" href="/source-files/assets/js/66.43f11efa.js"><link rel="prefetch" href="/source-files/assets/js/67.ce4c71b9.js"><link rel="prefetch" href="/source-files/assets/js/68.26530427.js"><link rel="prefetch" href="/source-files/assets/js/69.005c28c4.js"><link rel="prefetch" href="/source-files/assets/js/7.baaec696.js"><link rel="prefetch" href="/source-files/assets/js/70.b06c8279.js"><link rel="prefetch" href="/source-files/assets/js/71.361b4fbb.js"><link rel="prefetch" href="/source-files/assets/js/72.a034bd2d.js"><link rel="prefetch" href="/source-files/assets/js/73.7506ee83.js"><link rel="prefetch" href="/source-files/assets/js/74.e8179bfd.js"><link rel="prefetch" href="/source-files/assets/js/75.f89eb638.js"><link rel="prefetch" href="/source-files/assets/js/76.b3ebe07f.js"><link rel="prefetch" href="/source-files/assets/js/77.ab639976.js"><link rel="prefetch" href="/source-files/assets/js/78.9005e4ca.js"><link rel="prefetch" href="/source-files/assets/js/79.f39d96d4.js"><link rel="prefetch" href="/source-files/assets/js/8.e7a11f73.js"><link rel="prefetch" href="/source-files/assets/js/80.ab2a0dfe.js"><link rel="prefetch" href="/source-files/assets/js/81.ff975229.js"><link rel="prefetch" href="/source-files/assets/js/82.049238e3.js"><link rel="prefetch" href="/source-files/assets/js/83.25befc08.js"><link rel="prefetch" href="/source-files/assets/js/84.3fe553f9.js"><link rel="prefetch" href="/source-files/assets/js/85.a1b98603.js"><link rel="prefetch" href="/source-files/assets/js/86.f0104a93.js"><link rel="prefetch" href="/source-files/assets/js/87.27e067df.js"><link rel="prefetch" href="/source-files/assets/js/88.e5b6e0e8.js"><link rel="prefetch" href="/source-files/assets/js/89.e7ee10a1.js"><link rel="prefetch" href="/source-files/assets/js/9.bc1abdf2.js"><link rel="prefetch" href="/source-files/assets/js/90.f4e9ad92.js"><link rel="prefetch" href="/source-files/assets/js/91.45f74c09.js"><link rel="prefetch" href="/source-files/assets/js/92.96d4d729.js"><link rel="prefetch" href="/source-files/assets/js/93.4067e09c.js"><link rel="prefetch" href="/source-files/assets/js/94.f1092288.js"><link rel="prefetch" href="/source-files/assets/js/95.7c864cec.js"><link rel="prefetch" href="/source-files/assets/js/96.4c1f627e.js"><link rel="prefetch" href="/source-files/assets/js/97.fc59f2e3.js"><link rel="prefetch" href="/source-files/assets/js/98.7847956c.js"><link rel="prefetch" href="/source-files/assets/js/99.93c36229.js">
    <link rel="stylesheet" href="/source-files/assets/css/0.styles.6eaab90e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/source-files/" class="home-link router-link-active"><!----> <span class="site-name">wums</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/source-files/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://gitee.com/wmsnote/dashboard/wikis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WiKi
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://gitee.com/wmsnote/source-files" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitEE
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/source-files/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://gitee.com/wmsnote/dashboard/wikis" target="_blank" rel="noopener noreferrer" class="nav-link external">
  WiKi
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://gitee.com/wmsnote/source-files" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitEE
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/shell/" class="sidebar-heading clickable router-link-active open"><span>shell</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/source-files/shell/Bash简介.html" class="sidebar-link">Bash简介</a></li><li><a href="/source-files/shell/基本语法.html" class="sidebar-link">基本语法</a></li><li><a href="/source-files/shell/Bash的模式扩展.html" class="active sidebar-link">Bash的模式扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_1-简介" class="sidebar-link">1. 简介</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_2-波浪线扩展" class="sidebar-link">2. 波浪线扩展~</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_3-字符扩展" class="sidebar-link">3. ? 字符扩展</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_4-字符扩展" class="sidebar-link">4. * 字符扩展</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_5-方括号扩展" class="sidebar-link">5. 方括号扩展[]</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_6-大括号扩展" class="sidebar-link">6. 大括号扩展{}</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_7-变量扩展" class="sidebar-link">7. 变量扩展${}</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_8-子命令扩展" class="sidebar-link">8. 子命令扩展</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_9-算术扩展" class="sidebar-link">9. 算术扩展$(())</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_10-字符类-class" class="sidebar-link">10. 字符类[[:class:]]</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_11-使用注意点" class="sidebar-link">11. 使用注意点</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_12-量词语法" class="sidebar-link">12. 量词语法</a></li><li class="sidebar-sub-header"><a href="/source-files/shell/Bash的模式扩展.html#_13-shopt-命令" class="sidebar-link">13. shopt 命令</a></li></ul></li><li><a href="/source-files/shell/引号和转义.html" class="sidebar-link">引号和转义</a></li><li><a href="/source-files/shell/变量.html" class="sidebar-link">变量</a></li><li><a href="/source-files/shell/字符串操作.html" class="sidebar-link">字符串操作</a></li><li><a href="/source-files/shell/算数运算.html" class="sidebar-link">算数运算</a></li><li><a href="/source-files/shell/Bash行操作.html" class="sidebar-link">Bash行操作</a></li><li><a href="/source-files/shell/目录堆栈.html" class="sidebar-link">目录堆栈</a></li><li><a href="/source-files/shell/Bash脚本入门.html" class="sidebar-link">Bash脚本入门</a></li><li><a href="/source-files/shell/read命令.html" class="sidebar-link">read命令</a></li><li><a href="/source-files/shell/条件判断.html" class="sidebar-link">条件判断</a></li><li><a href="/source-files/shell/循环.html" class="sidebar-link">循环</a></li><li><a href="/source-files/shell/函数.html" class="sidebar-link">函数</a></li><li><a href="/source-files/shell/数组.html" class="sidebar-link">数组</a></li><li><a href="/source-files/shell/set.html" class="sidebar-link">set命令</a></li><li><a href="/source-files/shell/脚本除错.html" class="sidebar-link">脚本除错</a></li><li><a href="/source-files/shell/mktemp_and_trap.html" class="sidebar-link">mktemp命令和trap命令</a></li><li><a href="/source-files/shell/Bash启动环境.html" class="sidebar-link">Bash启动环境</a></li><li><a href="/source-files/shell/命令提示符.html" class="sidebar-link">命令提示符</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/设计模式/" class="sidebar-heading clickable"><span>设计模式</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/prometheus/" class="sidebar-heading clickable"><span>prometheus</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/travis-ci/" class="sidebar-heading clickable"><span>travis-ci教程</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/Dockerfile/" class="sidebar-heading clickable"><span>Dockerfile</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/java/" class="sidebar-heading clickable"><span>Java教程</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/springboot2/" class="sidebar-heading clickable"><span>SpringBoot2.x</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/source-files/nginx/" class="sidebar-heading clickable"><span>nginx</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-简介"><a href="#_1-简介" class="header-anchor">#</a> 1. 简介</h2> <p>Shell 接收到用户输入的命令以后，会根据空格将用户的输入，拆分成一个个词元（token）。然后，Shell 会扩展词元里面的特殊字符，扩展完成后才会调用相应的命令。</p> <p>这种特殊字符的扩展，称为模式扩展（globbing）。其中有些用到通配符，又称为通配符扩展（wildcard expansion）。Bash 一共提供八种扩展。</p> <ul><li>波浪线扩展</li> <li>? 字符扩展</li> <li><ul><li>字符扩展</li></ul></li> <li>方括号扩展</li> <li>大括号扩展</li> <li>变量扩展</li> <li>子命令扩展</li> <li>算术扩展</li></ul> <p>本章介绍这八种扩展。</p> <p>Bash 是先进行扩展，再执行命令。因此，扩展的结果是由 Bash 负责的，与所要执行的命令无关。
命令本身并不存在参数扩展，收到什么参数就原样执行。这一点务必需要记住。</p> <p>globbing这个词，来自于早期的 Unix 系统有一个/etc/glob文件，保存扩展的模板。后来 Bash 内置了这个功能，但是这个名字就保留了下来。</p> <p>模式扩展与正则表达式的关系是，模式扩展早于正则表达式出现，可以看作是原始的正则表达式。它的功能没有正则那么强大灵活，但是优点是简单和方便。</p> <p>Bash 允许用户关闭扩展。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">set</span> -o noglob

$ <span class="token builtin class-name">set</span> -f
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面的命令可以重新打开扩展。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">set</span> +o noglob

$ <span class="token builtin class-name">set</span> +f
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_2-波浪线扩展"><a href="#_2-波浪线扩展" class="header-anchor">#</a> 2. 波浪线扩展~</h2> <p>波浪线<code>~</code>会自动扩展成当前用户的主目录。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> ~
/home/me
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>~/dir</code>表示扩展成主目录的某个子目录，dir是主目录里面的一个子目录名。
<code>$ cd ~/foo</code></p> <p><code>~user</code>表示扩展成用户user的主目录。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> ~foo
/home/foo

$ <span class="token builtin class-name">echo</span> ~root
/root
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面例子中，Bash 会根据波浪号后面的用户名，返回该用户的主目录。</p> <p>如果<code>~user</code>的user是不存在的用户名，则波浪号扩展不起作用。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> ~nonExistedUser
~nonExistedUser
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>~+</code>会扩展成当前所在的目录，等同于pwd命令。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> ~/foo
$ <span class="token builtin class-name">echo</span> ~+
/home/me/foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-字符扩展"><a href="#_3-字符扩展" class="header-anchor">#</a> 3. ? 字符扩展</h2> <p>?字符代表文件路径里面的任意单个字符，不包括空字符。比如，Data???匹配所有Data后面跟着三个字符的文件名。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> ?.txt
a.txt b.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面命令中，?表示单个字符，所以会同时匹配a.txt和b.txt。</p> <p>如果匹配多个字符，就需要多个?连用。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> ??.txt
ab.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面命令中，??匹配了两个字符。</p> <p><code>?</code> 字符扩展属于文件名扩展，只有文件确实存在的前提下，才会发生扩展。如果文件不存在，扩展就不会发生。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> ?.txt
a.txt


$ <span class="token builtin class-name">echo</span> ?.txt
?.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面例子中，如果?.txt可以扩展成文件名，echo命令会输出扩展后的结果；如果不能扩展成文件名，echo就会原样输出?.txt。</p> <h2 id="_4-字符扩展"><a href="#_4-字符扩展" class="header-anchor">#</a> 4. * 字符扩展</h2> <p><code>*</code>字符代表文件路径里面的任意数量的字符，包括零个字符。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> *.txt
a.txt b.txt ab.txt


$ <span class="token function">ls</span> *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>下面是<code>*</code>匹配空字符的例子。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> a*.txt
a.txt ab.txt

$ <span class="token function">ls</span> *b*
b.txt ab.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意，<code>*</code>不会匹配隐藏文件（以.开头的文件）。</p> <p><code>$ echo .*</code></p> <p><code>$ echo .[!.]*</code> <code>*</code>字符扩展也属于文件名扩展，只有文件确实存在的前提下才会扩展。如果文件不存在，就会原样输出。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> c*.txt
c*.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，当前目录里面没有c开头的文件，导致<code>c*.txt</code>会原样输出。</p> <p><code>*</code>只匹配当前目录，不会匹配子目录。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> *.txt


$ <span class="token function">ls</span> */*.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面的例子，文本文件在子目录，<code>*.txt</code>不会产生匹配，必须写成<code>*/*.txt</code>。有几层子目录，就必须写几层星号。</p> <p>Bash 4.0 引入了一个参数globstar，当该参数打开时，允许<code>**</code>匹配零个或多个子目录。
因此，<code>**/*.txt</code>可以匹配顶层的文本文件和任意深度子目录的文本文件。详细介绍请看后面shopt命令的介绍。</p> <h2 id="_5-方括号扩展"><a href="#_5-方括号扩展" class="header-anchor">#</a> 5. 方括号扩展[]</h2> <p>方括号扩展的形式是[...]，只有文件确实存在的前提下才会扩展。如果文件不存在，就会原样输出。括号之中的任意一个字符。比如，[aeiou]可以匹配五个元音字母中的任意一个。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token punctuation">[</span>ab<span class="token punctuation">]</span>.txt
a.txt b.txt


$ <span class="token function">ls</span> <span class="token punctuation">[</span>ab<span class="token punctuation">]</span>.txt
a.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面例子中，[ab]可以匹配a或b，前提是确实存在相应的文件。</p> <p>方括号扩展属于文件名匹配，即扩展后的结果必须符合现有的文件路径。如果不存在匹配，就会保持原样，不进行扩展。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token punctuation">[</span>ab<span class="token punctuation">]</span>.txt
ls: 无法访问<span class="token string">'[ab].txt'</span><span class="token builtin class-name">:</span> 没有那个文件或目录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，由于扩展后的文件不存在，[ab].txt就原样输出了，导致ls命名报错。</p> <p>方括号扩展还有两种变体：<code>[^...]</code>和<code>[!...]</code>。它们表示匹配不在方括号里面的字符，这两种写法是等价的。
比如，<code>[^abc]</code>或<code>[!abc]</code>表示匹配除了a、b、c以外的字符。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> ?<span class="token punctuation">[</span><span class="token operator">!</span>a<span class="token punctuation">]</span>?

aba bbb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面命令中，[!a]表示文件名第二个字符不是a的文件名，所以返回了aba和bbb两个文件。</p> <p>注意，如果需要匹配[字符，可以放在方括号内，比如[[aeiou]。如果需要匹配连字号-，只能放在方括号内部的开头或结尾，比如[-aeiou]或[aeiou-]。</p> <h3 id="_5-1-start-end-扩展"><a href="#_5-1-start-end-扩展" class="header-anchor">#</a> 5.1 [start-end] 扩展</h3> <p>方括号扩展有一个简写形式[start-end]，表示匹配一个连续的范围。比如，[a-c]等同于[abc]，[0-9]匹配[0123456789]。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token punctuation">[</span>a-c<span class="token punctuation">]</span>.txt
a.txt
b.txt
c.txt


$ <span class="token function">ls</span> report<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>.txt
report1.txt
report2.txt
report3.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>下面是一些常用简写的例子。</p> <ul><li><code>[a-z]</code>：所有小写字母。</li> <li><code>[a-zA-Z]</code>：所有小写字母与大写字母。</li> <li><code>[a-zA-Z0-9]</code>：所有小写字母、大写字母与数字。</li> <li><code>[abc]*</code>：所有以a、b、c字符之一开头的文件名。</li> <li><code>program.[co]</code>：文件program.c与文件program.o。</li> <li><code>BACKUP.[0-9][0-9][0-9]</code>：所有以BACKUP.开头，后面是三个数字的文件名。</li></ul> <p>这种简写形式有一个否定形式[!start-end]，表示匹配不属于这个范围的字符。比如，[!a-zA-Z]表示匹配非英文字母的字符。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> report<span class="token punctuation">[</span><span class="token operator">!</span><span class="token number">1</span>–3<span class="token punctuation">]</span>.txt
report4.txt report5.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码中，[!1-3]表示排除1、2和3。</p> <h2 id="_6-大括号扩展"><a href="#_6-大括号扩展" class="header-anchor">#</a> 6. 大括号扩展{}</h2> <p>大括号扩展{...}表示分别扩展成大括号里面的所有值，各个值之间使用逗号分隔。比如，{1,2,3}扩展成1 2 3。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span><span class="token number">1,2</span>,3<span class="token punctuation">}</span>
<span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>

$ <span class="token builtin class-name">echo</span> d<span class="token punctuation">{</span>a,e,i,u,o<span class="token punctuation">}</span>g
dag deg <span class="token function">dig</span> dug dog

$ <span class="token builtin class-name">echo</span> Front-<span class="token punctuation">{</span>A,B,C<span class="token punctuation">}</span>-Back
Front-A-Back Front-B-Back Front-C-Back
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>注意，大括号扩展不是文件名扩展。它会扩展成所有给定的值，而不管是否有对应的文件存在。</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token punctuation">{</span>a,b,c<span class="token punctuation">}</span>.txt
ls: 无法访问<span class="token string">'a.txt'</span><span class="token builtin class-name">:</span> 没有那个文件或目录
ls: 无法访问<span class="token string">'b.txt'</span><span class="token builtin class-name">:</span> 没有那个文件或目录
ls: 无法访问<span class="token string">'c.txt'</span><span class="token builtin class-name">:</span> 没有那个文件或目录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面例子中，即使不存在对应的文件，{a,b,c}依然扩展成三个文件名，导致ls命令报了三个错误。</p> <p><strong>另一个需要注意的地方是，大括号内部的逗号前后不能有空格。否则，大括号扩展会失效。</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span><span class="token number">1</span> , <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token number">1</span> , <span class="token number">2</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，逗号前后有空格，Bash 就会认为这不是大括号扩展，而是三个独立的参数。</p> <p>逗号前面可以没有值，表示扩展的第一项为空。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">cp</span> a.log<span class="token punctuation">{</span>,.bak<span class="token punctuation">}</span>
<span class="token comment"># 等同于</span>
<span class="token comment"># cp a.log a.log.bak</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>大括号可以嵌套。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>j<span class="token punctuation">{</span>p,pe<span class="token punctuation">}</span>g,png<span class="token punctuation">}</span>
jpg jpeg png

$ <span class="token builtin class-name">echo</span> a<span class="token punctuation">{</span>A<span class="token punctuation">{</span><span class="token number">1,2</span><span class="token punctuation">}</span>,B<span class="token punctuation">{</span><span class="token number">3,4</span><span class="token punctuation">}</span><span class="token punctuation">}</span>b
aA1b aA2b aB3b aB4b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>大括号也可以与其他模式联用，并且总是先于其他模式进行扩展。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>cat,d*<span class="token punctuation">}</span>
<span class="token function">cat</span> dawg dg <span class="token function">dig</span> dog doug dug
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，会先进行大括号扩展，然后进行<code>*</code>扩展。</p> <p>大括号可以用于多字符的模式，方括号不行（只能匹配单字符）。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>cat,dog<span class="token punctuation">}</span>
<span class="token function">cat</span> dog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>由于大括号扩展{...}不是文件名扩展，所以它总是会扩展的。这与方括号扩展[...]完全不同，如果匹配的文件不存在，方括号就不会扩展。这一点要注意区分。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">[</span>ab<span class="token punctuation">]</span>.txt
<span class="token punctuation">[</span>ab<span class="token punctuation">]</span>.txt

$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>a,b<span class="token punctuation">}</span>.txt
a.txt b.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面例子中，如果不存在a.txt和b.txt，那么[ab].txt就会变成一个普通的文件名，而{a,b}.txt可以照样扩展。</p> <h3 id="_6-1-start-end-扩展"><a href="#_6-1-start-end-扩展" class="header-anchor">#</a> 6.1 {start..end} 扩展</h3> <p>大括号扩展有一个简写形式{start..end}，表示扩展成一个连续序列。比如，{a..z}可以扩展成26个小写英文字母。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>a<span class="token punctuation">..</span>c<span class="token punctuation">}</span>
a b c

$ <span class="token builtin class-name">echo</span> d<span class="token punctuation">{</span>a<span class="token punctuation">..</span>d<span class="token punctuation">}</span>g
dag dbg dcg ddg

$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">}</span>
<span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span>

$ <span class="token builtin class-name">echo</span> Number_<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span>
Number_1 Number_2 Number_3 Number_4 Number_5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这种简写形式支持逆序。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>c<span class="token punctuation">..</span>a<span class="token punctuation">}</span>
c b a

$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span>
<span class="token number">5</span> <span class="token number">4</span> <span class="token number">3</span> <span class="token number">2</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意，如果遇到无法理解的简写，大括号模式就会原样输出，不会扩展。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>a1<span class="token punctuation">..</span>3c<span class="token punctuation">}</span>
<span class="token punctuation">{</span>a1<span class="token punctuation">..</span>3c<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这种简写形式可以嵌套使用，形成复杂的扩展。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> .<span class="token punctuation">{</span>mp<span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">}</span>,m4<span class="token punctuation">{</span>a,b,p,v<span class="token punctuation">}</span><span class="token punctuation">}</span>
.mp3 .mp4 .m4a .m4b .m4p .m4v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>大括号扩展的常见用途为新建一系列目录。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> <span class="token punctuation">{</span><span class="token number">2007</span><span class="token punctuation">..</span><span class="token number">2009</span><span class="token punctuation">}</span>-<span class="token punctuation">{</span>01<span class="token punctuation">..</span><span class="token number">12</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面命令会新建36个子目录，每个子目录的名字都是”年份-月份“。</p> <p>这个写法的另一个常见用途，是直接用于for循环。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">4</span><span class="token punctuation">}</span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面例子会循环4次。</p> <p>如果整数前面有前导0，扩展输出的每一项都有前导0。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>01<span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span>
01 02 03 04 05

$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>001<span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span>
001 002 003 004 005
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这种简写形式还可以使用第二个双点号（start..end..step），用来指定扩展的步长。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">8</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">}</span>
<span class="token number">0</span> <span class="token number">2</span> <span class="token number">4</span> <span class="token number">6</span> <span class="token number">8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码将0扩展到8，每次递增的长度为2，所以一共输出5个数字。</p> <p>多个简写形式连用，会有循环处理的效果。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span>a<span class="token punctuation">..</span>c<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">3</span><span class="token punctuation">}</span>
a1 a2 a3 b1 b2 b3 c1 c2 c3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_7-变量扩展"><a href="#_7-变量扩展" class="header-anchor">#</a> 7. 变量扩展${}</h2> <p>Bash 将美元符号$开头的词元视为变量，将其扩展成变量值，详见《Bash 变量》一章。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token environment constant">$SHELL</span>
/bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>变量名除了放在美元符号后面，也可以放在<code>${}</code>里面。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token environment constant">SHELL</span>}</span>
/bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>${!string*}</code>或<code>${!string@}</code>返回所有匹配给定字符串string的变量名。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">!</span>S*}</span>
<span class="token environment constant">SECONDS</span> <span class="token environment constant">SHELL</span> <span class="token environment constant">SHELLOPTS</span> <span class="token environment constant">SHLVL</span> SSH_AGENT_PID <span class="token environment constant">SSH_AUTH_SOCK</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，<code>${!S*}</code>扩展成所有以S开头的变量名。</p> <h2 id="_8-子命令扩展"><a href="#_8-子命令扩展" class="header-anchor">#</a> 8. 子命令扩展</h2> <p><code>$(...)</code>可以扩展成另一个命令的运行结果，该命令的所有输出都会作为返回值。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span><span class="token variable">)</span></span>
Tue Jan <span class="token number">28</span> 00:01:13 CST <span class="token number">2020</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，<code>$(date)</code>返回<code>date</code>命令的运行结果。</p> <p>还有另一种较老的语法，子命令放在反引号之中，也可以扩展成命令的运行结果。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">date</span><span class="token variable">`</span></span>
Tue Jan <span class="token number">28</span> 00:01:13 CST <span class="token number">2020</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>上古语法反引号不推荐使用</p></blockquote> <p><code>$(...)</code>可以嵌套，比如<code>$(ls $(pwd))</code>。</p> <h2 id="_9-算术扩展"><a href="#_9-算术扩展" class="header-anchor">#</a> 9. 算术扩展$(())</h2> <p><code>$((...))</code>可以扩展成整数运算的结果，详见《Bash 的算术运算》一章。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token variable">))</span></span>
<span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_10-字符类-class"><a href="#_10-字符类-class" class="header-anchor">#</a> 10. 字符类[[:class:]]</h2> <p>[[:class:]]表示一个字符类，扩展成某一类特定字符之中的一个。常用的字符类如下。</p> <ul><li>[[:alnum:]]：匹配任意英文字母与数字</li> <li>[[:alpha:]]：匹配任意英文字母</li> <li>[[:blank:]]：空格和 Tab 键。</li> <li>[[:cntrl:]]：ASCII 码 0-31 的不可打印字符。</li> <li>[[:digit:]]：匹配任意数字 0-9。</li> <li>[[:graph:]]：A-Z、a-z、0-9 和标点符号。</li> <li>[[:lower:]]：匹配任意小写字母 a-z。</li> <li>[[:print:]]：ASCII 码 32-127 的可打印字符。</li> <li>[[:punct:]]：标点符号（除了 A-Z、a-z、0-9 的可打印字符）。</li> <li>[[:space:]]：空格、Tab、LF（10）、VT（11）、FF（12）、CR（13）。</li> <li>[[:upper:]]：匹配任意大写字母 A-Z。</li> <li>[[:xdigit:]]：16进制字符（A-F、a-f、0-9）。</li></ul> <p>请看下面的例子。</p> <p><code>$ echo [[:upper:]]*</code>
上面命令输出所有大写字母开头的文件名。</p> <p>字符类的第一个方括号后面，可以加上感叹号!，表示否定。比如，<code>[![:digit:]]</code>匹配所有非数字。</p> <p><code>$ echo [![:digit:]]*</code>
上面命令输出所有不以数字开头的文件名。</p> <p>字符类也属于文件名扩展，如果没有匹配的文件名，字符类就会原样输出。</p> <p>$ echo [[:upper:]]*
[[:upper:]]*
上面例子中，由于没有可匹配的文件，字符类就原样输出了。</p> <h2 id="_11-使用注意点"><a href="#_11-使用注意点" class="header-anchor">#</a> 11. 使用注意点</h2> <p>通配符有一些使用注意点，不可不知。</p> <p>（1）通配符是先解释，再执行。</p> <p>Bash 接收到命令以后，发现里面有通配符，会进行通配符扩展，然后再执行命令。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> a*.txt
ab.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面命令的执行过程是，Bash 先将<code>a*.txt</code>扩展成<code>ab.txt</code>，然后再执行<code>ls ab.txt</code>。</p> <p>（2）文件名扩展在不匹配时，会原样输出。</p> <p>文件名扩展在没有可匹配的文件时，会原样输出。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> r*
r*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码中，由于不存在r开头的文件名，<code>r*</code>会原样输出。</p> <p>下面是另一个例子。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> *.csv
ls: *.csv: No such <span class="token function">file</span> or directory
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>另外，前面已经说过，大括号扩展<code>{...}</code>不是文件名扩展。</p> <p>（3）只适用于单层路径。</p> <p>所有文件名扩展只匹配单层路径，不能跨目录匹配，即无法匹配子目录里面的文件。或者说，<code>?</code>或<code>*</code>这样的通配符，不能匹配路径分隔符（/）。</p> <p>如果要匹配子目录里面的文件，可以写成下面这样。</p> <p><code>$ ls */*.txt</code>
Bash 4.0 新增了一个globstar参数，允许<code>**</code>匹配零个或多个子目录，详见后面shopt命令的介绍。</p> <p>（4）文件名可以使用通配符。</p> <p>Bash 允许文件名使用通配符，即文件名包括特殊字符。这时引用文件名，需要把文件名放在单引号里面。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">touch</span> <span class="token string">'fo*'</span>
$ <span class="token function">ls</span>
fo*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面代码创建了一个fo<em>文件，这时</em>就是文件名的一部分。</p> <h2 id="_12-量词语法"><a href="#_12-量词语法" class="header-anchor">#</a> 12. 量词语法</h2> <p>量词语法用来控制模式匹配的次数。它只有在 Bash 的extglob参数打开的情况下才能使用，不过一般是默认打开的。下面的命令可以查询。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">shopt</span> extglob
extglob         on

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>量词语法有下面几个。</p> <p><code>?(pattern-list)</code>：匹配零个或一个模式。
<code>*(pattern-list)</code>：匹配零个或多个模式。
<code>+(pattern-list)</code>：匹配一个或多个模式。
<code>@(pattern-list)</code>：只匹配一个模式。
<code>!(pattern-list)</code>：匹配零个或一个以上的模式，但不匹配单独一个的模式。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> abc?<span class="token punctuation">(</span>.<span class="token punctuation">)</span>txt
abctxt abc.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，<code>?(.)</code>匹配零个或一个点。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> abc?<span class="token punctuation">(</span>def<span class="token punctuation">)</span>
abc abcdef
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，?(def)匹配零个或一个def。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> abc+<span class="token punctuation">(</span>.txt<span class="token operator">|</span>.php<span class="token punctuation">)</span>
abc.php abc.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，<code>+(.txt|.php)</code>匹配文件有一个.txt或.php后缀名。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> abc+<span class="token punctuation">(</span>.txt<span class="token punctuation">)</span>
abc.txt abc.txt.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，+(.txt)匹配文件有一个或多个.txt后缀名。</p> <p>量词语法也属于文件名扩展，如果不存在可匹配的文件，就会原样输出。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> abc?<span class="token punctuation">(</span>def<span class="token punctuation">)</span>
ls: 无法访问<span class="token string">'abc?(def)'</span><span class="token builtin class-name">:</span> 没有那个文件或目录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，由于没有可匹配的文件，abc?(def)就原样输出，导致ls命令报错。</p> <h2 id="_13-shopt-命令"><a href="#_13-shopt-命令" class="header-anchor">#</a> 13. shopt 命令</h2> <p>shopt命令可以调整 Bash 的行为。它有好几个参数跟通配符扩展有关。</p> <p>shopt命令的使用方法如下。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">shopt</span> -s <span class="token punctuation">[</span>optionname<span class="token punctuation">]</span>


$ <span class="token builtin class-name">shopt</span> -u <span class="token punctuation">[</span>optionname<span class="token punctuation">]</span>


$ <span class="token builtin class-name">shopt</span> <span class="token punctuation">[</span>optionname<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>（1）dotglob 参数</p> <p>dotglob参数可以让扩展结果包括隐藏文件（即点开头的文件）。</p> <p>正常情况下，扩展结果不包括隐藏文件。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> *
abc.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>打开dotglob，就会包括隐藏文件。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">shopt</span> -s dotglob
$ <span class="token function">ls</span> *
abc.txt .config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（2）nullglob 参数</p> <p>nullglob参数可以让通配符不匹配任何文件名时，返回空字符。</p> <p>默认情况下，通配符不匹配任何文件名时，会保持不变。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">rm</span> b*
rm: 无法删除<span class="token string">'b*'</span><span class="token builtin class-name">:</span> 没有那个文件或目录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面例子中，由于当前目录不包括b开头的文件名，导致b<em>不会发生文件名扩展，保持原样不变，所以rm命令报错没有b</em>这个文件。</p> <p>打开nullglob参数，就可以让不匹配的通配符返回空字符串。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">shopt</span> -s nullglob
$ <span class="token function">rm</span> b*
rm: 缺少操作数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面例子中，由于没有b<em>匹配的文件名，所以rm b</em>扩展成了rm，导致报错变成了”缺少操作数“。</p> <p>（3）failglob 参数</p> <p>failglob参数使得通配符不匹配任何文件名时，Bash 会直接报错，而不是让各个命令去处理。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">shopt</span> -s failglob
$ <span class="token function">rm</span> b*
bash: 无匹配: b*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面例子中，打开failglob以后，由于<code>b*</code>不匹配任何文件名，Bash 直接报错了，不再让rm命令去处理。</p> <p>（4）extglob 参数</p> <p>extglob参数使得 Bash 支持 ksh 的一些扩展语法。它默认应该是打开的。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">shopt</span> extglob
extglob         on
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>它的主要应用是支持量词语法。如果不希望支持量词语法，可以用下面的命令关闭。</p> <p><code>$ shopt -u extglob</code></p> <p>（5）nocaseglob 参数</p> <p>nocaseglob参数可以让通配符扩展不区分大小写。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">shopt</span> -s nocaseglob
$ <span class="token function">ls</span> /windows/program*
/windows/ProgramData
/windows/Program Files
/windows/Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面例子中，打开nocaseglob以后，<code>program*</code>就不区分大小写了，可以匹配ProgramData等。</p> <p>（6）globstar 参数</p> <p>globstar参数可以使得<code>**</code>匹配零个或多个子目录。该参数默认是关闭的。</p> <p>假设有下面的文件结构。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>a.txt
sub1/b.txt
sub1/sub2/c.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面的文件结构中，顶层目录、第一级子目录sub1、第二级子目录sub1\sub2里面各有一个文本文件。请问怎样才能使用通配符，将它们显示出来？</p> <p>默认情况下，只能写成下面这样。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ls</span> *.txt */*.txt */*/*.txt
a.txt  sub1/b.txt  sub1/sub2/c.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这是因为<code>*</code>只匹配当前目录，如果要匹配子目录，只能一层层写出来。</p> <p>打开globstar参数以后，<code>**</code>匹配零个或多个子目录。因此，<code>**/*.txt</code>就可以得到想要的结果。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">shopt</span> -s globstar
$ <span class="token function">ls</span> **/*.txt
a.txt  sub1/b.txt  sub1/sub2/c.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/24/2020, 6:08:02 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/source-files/shell/基本语法.html" class="prev">
        基本语法
      </a></span> <span class="next"><a href="/source-files/shell/引号和转义.html">
        引号和转义
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/source-files/assets/js/app.23990cc4.js" defer></script><script src="/source-files/assets/js/2.a20b4d8f.js" defer></script><script src="/source-files/assets/js/61.c118df0e.js" defer></script>
  </body>
</html>
